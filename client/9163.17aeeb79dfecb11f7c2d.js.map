{"version":3,"file":"9163.17aeeb79dfecb11f7c2d.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/settings_sidebar/settings_sidebar.tsx","webpack://mattermost-webapp/./src/components/settings_sidebar/index.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport classNames from 'classnames';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport Constants from 'utils/constants';\nimport {isKeyPressed} from 'utils/keyboard';\n\nexport type Tab = {\n    icon: string | {url: string};\n    iconTitle: string;\n    name: string;\n    uiName: string;\n    newGroup?: boolean;\n    display?: boolean; // Controls whether the tab is displayed, defaults to true\n}\n\nexport type Props = {\n    activeTab?: string;\n    tabs: Tab[];\n    pluginTabs?: Tab[];\n    updateTab: (name: string) => void;\n    isMobileView: boolean;\n};\n\nexport default class SettingsSidebar extends React.PureComponent<Props> {\n    buttonRefs: Map<string, HTMLButtonElement>;\n\n    constructor(props: Props) {\n        super(props);\n\n        this.buttonRefs = new Map();\n    }\n\n    // Get all visible tabs in the correct order\n    private getVisibleTabs(): Tab[] {\n        const visibleTabs = this.props.tabs.filter((tab) => tab.display !== false);\n        const visiblePluginTabs = this.props.pluginTabs?.filter((tab) => tab.display !== false) || [];\n        return [...visibleTabs, ...visiblePluginTabs];\n    }\n\n    public handleClick = (tab: Tab, e: React.MouseEvent) => {\n        e.preventDefault();\n        this.props.updateTab(tab.name);\n        (e.target as Element).closest('.settings-modal')?.classList.add('display--content');\n    };\n\n    public handleKeyDown = (tab: Tab, e: React.KeyboardEvent) => {\n        // Only handle UP and DOWN arrow keys\n        if (!isKeyPressed(e, Constants.KeyCodes.UP) && !isKeyPressed(e, Constants.KeyCodes.DOWN)) {\n            return;\n        }\n\n        // Prevent scrolling\n        e.preventDefault();\n\n        // Get all visible tabs\n        const visibleTabs = this.getVisibleTabs();\n\n        // If no tabs are visible, do nothing\n        if (visibleTabs.length === 0) {\n            return;\n        }\n\n        // Find the current tab's position in the visible tabs\n        const currentIndex = visibleTabs.findIndex((t) => t.name === tab.name);\n\n        // If tab not found in visible tabs, do nothing\n        if (currentIndex === -1) {\n            return;\n        }\n\n        let nextIndex: number;\n\n        // Determine which tab to focus based on the key pressed\n        if (isKeyPressed(e, Constants.KeyCodes.UP)) {\n            // UP arrow key - move to previous tab or wrap to last\n            nextIndex = currentIndex > 0 ? currentIndex - 1 : visibleTabs.length - 1;\n        } else {\n            // DOWN arrow key - move to next tab or wrap to first\n            nextIndex = currentIndex < visibleTabs.length - 1 ? currentIndex + 1 : 0;\n        }\n\n        // Get the target tab\n        const targetTab = visibleTabs[nextIndex];\n\n        // Update the active tab\n        this.props.updateTab(targetTab.name);\n\n        // Focus the target tab button directly\n        const targetButton = this.buttonRefs.get(targetTab.name);\n        if (targetButton) {\n            // Use direct focus instead of a11yFocus to ensure Cypress tests can detect the focus change\n            targetButton.focus();\n        }\n    };\n\n    private renderTab(tab: Tab) {\n        const key = `${tab.name}_li`;\n        const isActive = this.props.activeTab === tab.name;\n\n        let icon;\n        if (typeof tab.icon === 'string') {\n            icon = (\n                <i\n                    className={tab.icon}\n                    title={tab.iconTitle}\n                />\n            );\n        } else {\n            icon = (\n                <img\n                    src={tab.icon.url}\n                    alt={tab.iconTitle}\n                    className='icon'\n                />\n            );\n        }\n\n        return (\n            <React.Fragment key={key}>\n                {tab.newGroup && <hr/>}\n                <button\n                    data-testid={`${tab.name}-tab-button`}\n                    ref={(element: HTMLButtonElement) => {\n                        if (element) {\n                            this.buttonRefs.set(tab.name, element);\n                        } else {\n                            this.buttonRefs.delete(tab.name);\n                        }\n                    }}\n                    id={`${tab.name}Button`}\n                    className={classNames('cursor--pointer style--none nav-pills__tab', {active: isActive})}\n                    onClick={this.handleClick.bind(null, tab)}\n                    onKeyDown={this.handleKeyDown.bind(null, tab)}\n                    aria-label={tab.uiName.toLowerCase()}\n                    role='tab'\n                    aria-selected={isActive}\n                    tabIndex={!isActive && !this.props.isMobileView ? -1 : 0}\n                    aria-controls={`${tab.name}Settings`}\n                >\n                    {icon}\n                    {tab.uiName}\n                </button>\n            </React.Fragment>\n        );\n    }\n\n    public render() {\n        // Filter regular tabs and plugin tabs separately for rendering\n        const visibleTabs = this.props.tabs.filter((tab) => tab.display !== false);\n\n        // Map regular tabs\n        const tabList = visibleTabs.map((tab) => this.renderTab(tab));\n\n        let pluginTabList: React.ReactNode;\n        if (this.props.pluginTabs?.length) {\n            const visiblePluginTabs = this.props.pluginTabs.filter((tab) => tab.display !== false);\n            if (visiblePluginTabs.length) {\n                pluginTabList = (\n                    <>\n                        <hr/>\n                        <div\n                            role='group'\n                            aria-labelledby='userSettingsModal.pluginPreferences.header'\n                        >\n                            <div\n                                key={'plugin preferences heading'}\n                                role='heading'\n                                className={'header'}\n                                aria-level={3}\n                                id='userSettingsModal_pluginPreferences_header'\n                            >\n                                <FormattedMessage\n                                    id={'userSettingsModal.pluginPreferences.header'}\n                                    defaultMessage={'PLUGIN PREFERENCES'}\n                                />\n                            </div>\n                            {visiblePluginTabs.map((tab) => this.renderTab(tab))}\n                        </div>\n                    </>\n                );\n            }\n        }\n\n        return (\n            <div\n                id='tabList'\n                className='nav nav-pills nav-stacked'\n                role='tablist'\n                aria-orientation='vertical'\n            >\n                <div role='group'>\n                    {tabList}\n                </div>\n                {pluginTabList}\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\n\nimport {getIsMobileView} from 'selectors/views/browser';\n\nimport type {GlobalState} from 'types/store';\n\nimport SettingsSidebar from './settings_sidebar';\n\nfunction mapStateToProps(state: GlobalState) {\n    return {\n        isMobileView: getIsMobileView(state),\n    };\n}\n\nexport default connect(mapStateToProps)(SettingsSidebar);\n"],"names":["SettingsSidebar","React","constructor","props","super","_defineProperty","tab","e","_closest","preventDefault","this","updateTab","name","target","closest","classList","add","isKeyPressed","Constants","KeyCodes","UP","DOWN","visibleTabs","getVisibleTabs","length","currentIndex","findIndex","t","nextIndex","targetTab","targetButton","buttonRefs","get","focus","Map","_this$props$pluginTab","tabs","filter","display","pluginTabs","renderTab","key","concat","isActive","activeTab","icon","className","title","iconTitle","src","url","alt","newGroup","ref","element","set","delete","id","classNames","active","onClick","handleClick","bind","onKeyDown","handleKeyDown","uiName","toLowerCase","role","tabIndex","isMobileView","render","_this$props$pluginTab2","tabList","map","pluginTabList","visiblePluginTabs","FormattedMessage","defaultMessage","_pt","isRequired","connect","state","getIsMobileView"],"sourceRoot":""}