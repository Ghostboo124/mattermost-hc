"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[4292],{43957:(e,t,s)=>{s.d(t,{A:()=>_});var i=s(23453),a=s(5908),n=s(17085),o=s(7430),r=s(62688),l=s.n(r),c=(s(4290),s(97023)),d=s.n(c),u=s(14778),m=(s(3188),s(59297),s(76685),s(85873));const p=(0,u.defineMessages)({sessionRevoked:{id:"audit_table.sessionRevoked",defaultMessage:"The session with id {sessionId} was revoked"},channelCreated:{id:"audit_table.channelCreated",defaultMessage:"Created the {channelName} channel"},establishedDM:{id:"audit_table.establishedDM",defaultMessage:"Established a direct message channel with {username}"},nameUpdated:{id:"audit_table.nameUpdated",defaultMessage:"Updated the {channelName} channel name"},headerUpdated:{id:"audit_table.headerUpdated",defaultMessage:"Updated the {channelName} channel header"},channelDeleted:{id:"audit_table.channelDeleted",defaultMessage:"Archived the channel with the URL {url}"},userAdded:{id:"audit_table.userAdded",defaultMessage:"Added {username} to the {channelName} channel"},userRemoved:{id:"audit_table.userRemoved",defaultMessage:"Removed {username} to the {channelName} channel"},attemptedRegisterApp:{id:"audit_table.attemptedRegisterApp",defaultMessage:"Attempted to register a new OAuth Application with ID {id}"},attemptedAllowOAuthAccess:{id:"audit_table.attemptedAllowOAuthAccess",defaultMessage:"Attempted to allow a new OAuth service access"},successfullOAuthAccess:{id:"audit_table.successfullOAuthAccess",defaultMessage:"Successfully gave a new OAuth service access"},failedOAuthAccess:{id:"audit_table.failedOAuthAccess",defaultMessage:"Failed to allow a new OAuth service access - the redirect URI did not match the previously registered callback"},attemptedOAuthToken:{id:"audit_table.attemptedOAuthToken",defaultMessage:"Attempted to get an OAuth access token"},successfullOAuthToken:{id:"audit_table.successfullOAuthToken",defaultMessage:"Successfully added a new OAuth service"},oauthTokenFailed:{id:"audit_table.oauthTokenFailed",defaultMessage:"Failed to get an OAuth access token - {token}"},attemptedLogin:{id:"audit_table.attemptedLogin",defaultMessage:"Attempted to login"},authenticated:{id:"audit_table.authenticated",defaultMessage:"Successfully authenticated"},successfullLogin:{id:"audit_table.successfullLogin",defaultMessage:"Successfully logged in"},failedLogin:{id:"audit_table.failedLogin",defaultMessage:"FAILED login attempt"},updatePicture:{id:"audit_table.updatePicture",defaultMessage:"Updated your profile picture"},updateGeneral:{id:"audit_table.updateGeneral",defaultMessage:"Updated the general settings of your account"},attemptedPassword:{id:"audit_table.attemptedPassword",defaultMessage:"Attempted to change password"},successfullPassword:{id:"audit_table.successfullPassword",defaultMessage:"Successfully changed password"},failedPassword:{id:"audit_table.failedPassword",defaultMessage:"Failed to change password - tried to update user password who was logged in through OAuth"},updatedRol:{id:"audit_table.updatedRol",defaultMessage:"Updated user role(s) to "},member:{id:"audit_table.member",defaultMessage:"member"},accountActive:{id:"audit_table.accountActive",defaultMessage:"Account activated"},accountInactive:{id:"audit_table.accountInactive",defaultMessage:"Account deactivated"},by:{id:"audit_table.by",defaultMessage:" by {username}"},byAdmin:{id:"audit_table.byAdmin",defaultMessage:" by an admin"},sentEmail:{id:"audit_table.sentEmail",defaultMessage:"Sent an email to {email} to reset your password"},attemptedReset:{id:"audit_table.attemptedReset",defaultMessage:"Attempted to reset password"},successfullReset:{id:"audit_table.successfullReset",defaultMessage:"Successfully reset password"},updateGlobalNotifications:{id:"audit_table.updateGlobalNotifications",defaultMessage:"Updated your global notification settings"},attemptedWebhookCreate:{id:"audit_table.attemptedWebhookCreate",defaultMessage:"Attempted to create a webhook"},succcessfullWebhookCreate:{id:"audit_table.successfullWebhookCreate",defaultMessage:"Successfully created a webhook"},failedWebhookCreate:{id:"audit_table.failedWebhookCreate",defaultMessage:"Failed to create a webhook - bad channel permissions"},attemptedWebhookDelete:{id:"audit_table.attemptedWebhookDelete",defaultMessage:"Attempted to delete a webhook"},successfullWebhookDelete:{id:"audit_table.successfullWebhookDelete",defaultMessage:"Successfully deleted a webhook"},failedWebhookDelete:{id:"audit_table.failedWebhookDelete",defaultMessage:"Failed to delete a webhook - inappropriate conditions"},logout:{id:"audit_table.logout",defaultMessage:"Logged out of your account"},verified:{id:"audit_table.verified",defaultMessage:"Successfully verified your email address"},revokedAll:{id:"audit_table.revokedAll",defaultMessage:"Revoked all current sessions for the team"},loginAttempt:{id:"audit_table.loginAttempt",defaultMessage:" (Login attempt)"},loginFailure:{id:"audit_table.loginFailure",defaultMessage:" (Login failure)"},attemptedLicenseAdd:{id:"audit_table.attemptedLicenseAdd",defaultMessage:"Attempted to add new license"},successfullLicenseAdd:{id:"audit_table.successfullLicenseAdd",defaultMessage:"Successfully added new license"},failedExpiredLicenseAdd:{id:"audit_table.failedExpiredLicenseAdd",defaultMessage:"Failed to add a new license as it has either expired or not yet been started"},failedInvalidLicenseAdd:{id:"audit_table.failedInvalidLicenseAdd",defaultMessage:"Failed to add an invalid license"},licenseRemoved:{id:"audit_table.licenseRemoved",defaultMessage:"Successfully removed a license"}});function h(e){let{actionURL:t,audit:s,desc:a,showUserId:n,showIp:r,showSession:l}=e;const c=(0,u.useIntl)();let h=a;if(!h)if(s.extra_info.indexOf("revoked_all=")>=0)h=c.formatMessage(p.revokedAll);else{let e="";t&&-1!==t.lastIndexOf("/")&&(e=t.substring(t.lastIndexOf("/")+1).replace("_"," "),e=(0,m.Sn)(e));let i="";s.extra_info&&(i=s.extra_info,-1!==i.indexOf("=")&&(i=i.substring(i.indexOf("=")+1))),h=e+" "+i}const f=new Date(s.create_at),g=d().createElement("div",null,d().createElement("div",null,d().createElement(u.FormattedDate,{value:f,day:"2-digit",month:"short",year:"numeric"})),d().createElement("div",null,d().createElement(u.FormattedTime,{value:f,hour:"2-digit",minute:"2-digit"}))),b=s.ip_address,E=s.session_id,v=(0,i.useSelector)((e=>(0,o.wz)(e,s.user_id))),y=v?v.email:s.user_id;let M,S,k;n&&(M=d().createElement("td",{className:"word-break--all"},y)),r&&(S=d().createElement("td",{className:"whitespace--nowrap word-break--all"},b)),l&&(k=d().createElement("td",{className:"whitespace--nowrap word-break--all"},E));let N="";return-1!==h.toLowerCase().indexOf("fail")&&(N=" color--error"),d().createElement("tr",{key:s.id},d().createElement("td",{className:"whitespace--nowrap word-break--all"},g),M,d().createElement("td",{className:"word-break--all"+N},h),S,k)}h.propTypes={actionURL:l().string.isRequired,desc:l().string,showUserId:l().bool.isRequired,showIp:l().bool.isRequired,showSession:l().bool.isRequired},s(29206);var f=s(65952);function g(e){var t,s;let{audit:a,actionURL:n,showUserId:o,showIp:r,showSession:l,channelObj:c}=e;const m=(0,u.useIntl)(),g=null!==(t=null==c?void 0:c.id)&&void 0!==t?t:"",b=m.formatMessage(p.establishedDM,{username:null===(s=(0,i.useSelector)((e=>(0,f.yH)(e,g))))||void 0===s?void 0:s.username});return d().createElement(h,{audit:a,actionURL:n,desc:b,showUserId:o,showIp:r,showSession:l})}function b(e){let{audit:t,actionURL:s,showUserId:a,showIp:n,showSession:r,channelInfo:l,channelName:c,channelURL:m}=e;const f=(0,u.useIntl)();let g=[],b="",E="";l[1]&&(g=l[1].split("="),g.indexOf("user_id")>=0&&(b=g[g.indexOf("user_id")+1]));const v=(0,i.useSelector)((e=>(0,o.wz)(e,b)));v&&(E=v.username);let y="";return/\/channels\/[A-Za-z0-9]+\/delete/.test(s)?y=f.formatMessage(p.channelDeleted,{url:m}):/\/channels\/[A-Za-z0-9]+\/add/.test(s)?y=f.formatMessage(p.userAdded,{username:E,channelName:c}):/\/channels\/[A-Za-z0-9]+\/remove/.test(s)&&(y=f.formatMessage(p.userRemoved,{username:E,channelName:c})),d().createElement(h,{audit:t,actionURL:s,desc:y,showUserId:a,showIp:n,showSession:r})}function E(e){var t;let{audit:s,actionURL:a,showUserId:n,showIp:o,showSession:r}=e;const l={showUserId:n,showIp:o,showSession:r},c=(0,u.useIntl)(),m=s.extra_info.split(" "),E=m[0].split("="),v=E.indexOf("name")>=0?E[E.indexOf("name")+1]:"",y=(0,i.useSelector)((e=>(0,f.Os)(e,v))),M=null!==(t=null==y?void 0:y.display_name)&&void 0!==t?t:v;switch(a){case"/channels/create":return d().createElement(h,Object.assign({audit:s,actionURL:a,desc:c.formatMessage(p.channelCreated,{channelName:M})},l));case"/channels/create_direct":return d().createElement(g,{audit:s,actionURL:a,showUserId:n,showIp:o,showSession:r,channelObj:y});case"/channels/update":return d().createElement(h,Object.assign({audit:s,actionURL:a,desc:c.formatMessage(p.nameUpdated,{channelName:M})},l));case"/channels/update_desc":case"/channels/update_header":return d().createElement(h,Object.assign({audit:s,actionURL:a,desc:c.formatMessage(p.headerUpdated,{channelName:M})},l));default:return d().createElement(b,{audit:s,actionURL:a,showUserId:n,showIp:o,showSession:r,channelInfo:m,channelName:M,channelURL:v})}}g.propTypes={actionURL:l().string.isRequired,showUserId:l().bool.isRequired,showIp:l().bool.isRequired,showSession:l().bool.isRequired},b.propTypes={actionURL:l().string.isRequired,showUserId:l().bool.isRequired,showIp:l().bool.isRequired,showSession:l().bool.isRequired,channelInfo:l().arrayOf(l().string).isRequired,channelName:l().string.isRequired,channelURL:l().string.isRequired},E.propTypes={actionURL:l().string.isRequired,showUserId:l().bool.isRequired,showIp:l().bool.isRequired,showSession:l().bool.isRequired};var v,y,M,S=s(79342);function k(e){let{audit:t,actionURL:s,showUserId:a,showIp:n,showSession:r,updateField:l,userInfo:c}=e;const m=(0,u.useIntl)();let f="";"true"===l?f=m.formatMessage(p.accountActive):"false"===l&&(f=m.formatMessage(p.accountInactive));const g=c[1].split("="),b="session_user"===g[0],E=(0,i.useSelector)((e=>(0,o.wz)(e,b?g[1]:""))),v=(0,i.useSelector)((e=>(0,o.HW)(e)));return b&&(v&&E&&(0,S.FV)(v.roles)?f+=m.formatMessage(p.by,{username:E.username}):v&&E&&(f+=m.formatMessage(p.byAdmin))),d().createElement(h,{audit:t,actionURL:s,desc:f,showUserId:a,showIp:n,showSession:r})}function N(e){let{audit:t,actionURL:s,showUserId:i,showIp:a,showSession:n}=e;const o={showUserId:i,showIp:a,showSession:n},r=(0,u.useIntl)(),l=t.extra_info.split(" ");let c="";switch(s){case"/users/login":return"attempt"===l[0]?c=r.formatMessage(p.attemptedLogin):"success"===l[0]?c=r.formatMessage(p.successfullLogin):"authenticated"===l[0]?c=r.formatMessage(p.authenticated):l[0]&&(c=r.formatMessage(p.failedLogin)),d().createElement(h,Object.assign({audit:t,actionURL:s,desc:c},o));case"/users/revoke_session":return d().createElement(h,Object.assign({audit:t,actionURL:s,desc:r.formatMessage(p.sessionRevoked,{sessionId:l[0].split("=")[1]})},o));case"/users/newimage":return d().createElement(h,Object.assign({audit:t,actionURL:s,desc:r.formatMessage(p.updatePicture)},o));case"/users/update":return d().createElement(h,Object.assign({audit:t,actionURL:s,desc:r.formatMessage(p.updateGeneral)},o));case"/users/newpassword":return"attempted"===l[0]?c=r.formatMessage(p.attemptedPassword):"completed"===l[0]?c=r.formatMessage(p.successfullPassword):"failed - tried to update user password who was logged in through oauth"===l[0]&&(c=r.formatMessage(p.failedPassword)),d().createElement(h,Object.assign({audit:t,actionURL:s,desc:r.formatMessage(p.updateGeneral)},o));case"/users/update_roles":{const e=l[0].split("=")[1];return c=r.formatMessage(p.updatedRol),e.trim()?c+=e:c+=r.formatMessage(p.member),d().createElement(h,Object.assign({audit:t,actionURL:s,desc:c},o))}case"/users/update_active":{const e=l[0].split("=")[0],u=l[0].split("=")[1];return"active"===e?d().createElement(k,{audit:t,actionURL:s,showUserId:i,showIp:a,showSession:n,updateField:u,userInfo:l}):("session_id"===e&&(c=r.formatMessage(p.sessionRevoked,{sessionId:u})),d().createElement(h,Object.assign({audit:t,actionURL:s,desc:c},o)))}case"/users/send_password_reset":return d().createElement(h,Object.assign({audit:t,actionURL:s,desc:r.formatMessage(p.sentEmail,{email:l[0].split("=")[1]})},o));case"/users/reset_password":return"attempt"===l[0]?c=r.formatMessage(p.attemptedReset):"success"===l[0]&&(c=r.formatMessage(p.successfullReset)),d().createElement(h,Object.assign({audit:t,actionURL:s,desc:c},o));case"/users/update_notify":return d().createElement(h,Object.assign({audit:t,actionURL:s,desc:r.formatMessage(p.updateGlobalNotifications)},o));default:return d().createElement(h,{audit:t,actionURL:s,desc:c,showUserId:i,showIp:a,showSession:n})}}function w(e){let{audit:t,showUserId:s,showIp:i,showSession:a}=e;const n=(0,u.useIntl)(),o=t.action.replace(/\/api\/v[1-9]/,"");if(0===o.indexOf("/channels"))return d().createElement(E,{audit:t,actionURL:o,showUserId:s,showIp:i,showSession:a});if(0===o.indexOf("/users"))return d().createElement(N,{audit:t,actionURL:o,showUserId:s,showIp:i,showSession:a});const{formatMessage:r}=n;let l="";if(0===o.indexOf("/oauth")){const e=t.extra_info.split(" ");switch(o){case"/oauth/register":{const t=e[0].split("=");"client_id"===t[0]&&(l=r(p.attemptedRegisterApp,{id:t[1]}));break}case"/oauth/allow":"attempt"===e[0]?l=r(p.attemptedAllowOAuthAccess):"success"===e[0]?l=r(p.successfullOAuthAccess):"fail - redirect_uri did not match registered callback"===e[0]&&(l=r(p.failedOAuthAccess));break;case"/oauth/access_token":if("attempt"===e[0])l=r(p.attemptedOAuthToken);else if("success"===e[0])l=r(p.successfullOAuthToken);else{const t=e[0].split("-");"fail"===t[0].trim()&&t[1]&&(l=r(p.oauthTokenFailed,{token:t[1].trim()}))}}}else if(0===o.indexOf("/hooks")){const e=t.extra_info;switch(o){case"/hooks/incoming/create":"attempt"===e?l=r(p.attemptedWebhookCreate):"success"===e?l=r(p.succcessfullWebhookCreate):"fail - bad channel permissions"===e&&(l=r(p.failedWebhookCreate));break;case"/hooks/incoming/delete":"attempt"===e?l=r(p.attemptedWebhookDelete):"success"===e?l=r(p.successfullWebhookDelete):"fail - inappropriate conditions"===e&&(l=r(p.failedWebhookDelete))}}else if(0===o.indexOf("/license")){const e=t.extra_info;switch(o){case"/license/add":"attempt"===e?l=r(p.attemptedLicenseAdd):"success"===e?l=r(p.successfullLicenseAdd):"failed - expired or non-started license"===e?l=r(p.failedExpiredLicenseAdd):"failed - invalid license"===e&&(l=r(p.failedInvalidLicenseAdd));break;case"/license/remove":l=r(p.licenseRemoved)}}else if(0===o.indexOf("/admin/download_compliance_report"))l=(0,m.Sn)(t.extra_info);else switch(o){case"/logout":l=r(p.logout);break;case"/verify_email":l=r(p.verified)}return d().createElement(h,{audit:t,desc:l,actionURL:o,showUserId:s,showIp:i,showSession:a})}k.propTypes={actionURL:l().string.isRequired,showUserId:l().bool.isRequired,showIp:l().bool.isRequired,showSession:l().bool.isRequired,updateField:l().string.isRequired,userInfo:l().arrayOf(l().string).isRequired},N.propTypes={actionURL:l().string.isRequired,showUserId:l().bool.isRequired,showIp:l().bool.isRequired,showSession:l().bool.isRequired},w.propTypes={showUserId:l().bool.isRequired,showIp:l().bool.isRequired,showSession:l().bool.isRequired};class A extends d().PureComponent{componentDidMount(){const e=this.props.audits.map((e=>e.user_id));this.props.actions.getMissingProfilesByIds(e)}render(){const{audits:e,showUserId:t,showIp:s,showSession:i}=this.props;let a,n,o;return t&&(a=d().createElement("th",null,d().createElement(u.FormattedMessage,{id:"audit_table.userId",defaultMessage:"User ID"}))),s&&(n=d().createElement("th",null,d().createElement(u.FormattedMessage,{id:"audit_table.ip",defaultMessage:"IP Address"}))),i&&(o=d().createElement("th",null,d().createElement(u.FormattedMessage,{id:"audit_table.session",defaultMessage:"Session ID"}))),d().createElement("table",{className:"table"},d().createElement("thead",null,d().createElement("tr",null,d().createElement("th",null,d().createElement(u.FormattedMessage,{id:"audit_table.timestamp",defaultMessage:"Timestamp"})),a,d().createElement("th",null,d().createElement(u.FormattedMessage,{id:"audit_table.action",defaultMessage:"Action"})),n,o)),d().createElement("tbody",{"data-testid":"auditTableBody"},e.map((e=>d().createElement(w,{key:e.id,audit:e,showUserId:Boolean(this.props.showUserId),showIp:Boolean(this.props.showIp),showSession:Boolean(this.props.showSession)})))))}}v=A,y="propTypes",M={audits:l().array.isRequired,showUserId:l().bool,showIp:l().bool,showSession:l().bool,actions:l().shape({getMissingProfilesByIds:l().func.isRequired}).isRequired},(y=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(y))in v?Object.defineProperty(v,y,{value:M,enumerable:!0,configurable:!0,writable:!0}):v[y]=M;const I=(0,u.injectIntl)(A),_=(0,i.connect)((function(e){return{currentUser:(0,o.HW)(e)}}),(function(e){return{actions:(0,a.bindActionCreators)({getMissingProfilesByIds:n.WA},e)}}))(I)},61295:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(62688),a=s.n(i),n=(s(4290),s(97023)),o=s.n(n),r=s(28105),l=s(11038);function c(e,t,s){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d extends o().PureComponent{constructor(e){super(e),c(this,"checkClick",(e=>{this.colorPicker.current&&this.colorPicker.current.contains(e.target)||this.setState({isOpened:!1})})),c(this,"togglePicker",(()=>{!this.state.isOpened&&this.colorInput.current&&this.colorInput.current.focus(),this.setState({isOpened:!this.state.isOpened})})),c(this,"handleColorChange",(e=>{this.setState({focused:!1}),this.props.onChange(e.hex)})),c(this,"onChange",(e=>{const t=e.target.value,s=(0,l.A)(t),i="#"+s.toHex();s.isValid()&&this.props.onChange(i),this.setState({value:t})})),c(this,"onFocus",(e=>{this.setState({focused:!0}),e.target&&e.target.setSelectionRange(1,e.target.value.length)})),c(this,"onBlur",(()=>{const e=this.state.value,t=(0,l.A)(e),s="#"+t.toHex();t.isValid()?(this.props.onChange(s),this.setState({value:s})):this.setState({value:this.props.value}),this.setState({focused:!1})})),c(this,"onKeyDown",(e=>{"Enter"!==e.key&&" "!==e.key||this.togglePicker()})),this.colorPicker=o().createRef(),this.colorInput=o().createRef(),this.state={focused:!1,isOpened:!1,value:e.value}}static getDerivedStateFromProps(e,t){return t.focused||e.value===t.value?null:{value:e.value}}componentDidUpdate(e,t){const{isOpened:s}=t,{isOpened:i}=this.state;i!==s&&(i?document.addEventListener("click",this.checkClick,{capture:!0}):document.removeEventListener("click",this.checkClick))}render(){const{id:e}=this.props,{isOpened:t,value:s}=this.state;return o().createElement("div",{className:"color-input input-group"},o().createElement("input",{id:"".concat(e,"-inputColorValue"),ref:this.colorInput,className:"form-control",type:"text",value:s,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeyDown,maxLength:7,disabled:this.props.isDisabled,"data-testid":"color-inputColorValue"}),!this.props.isDisabled&&o().createElement("span",{id:"".concat(e,"-squareColorIcon"),className:"input-group-addon color-pad",onClick:this.togglePicker},o().createElement("i",{id:"".concat(e,"-squareColorIconValue"),className:"color-icon",style:{backgroundColor:s}})),t&&o().createElement("div",{ref:this.colorPicker,className:"color-popover",id:"".concat(e,"-ChromePickerModal")},o().createElement(r.xk,{color:s,onChange:this.handleColorChange,disableAlpha:!0})))}}c(d,"propTypes",{id:a().string.isRequired,onChange:a().func.isRequired,value:a().string.isRequired,isDisabled:a().bool})},85990:(e,t,s)=>{s.d(t,{Ay:()=>d,Nq:()=>r});var i=s(62688),a=s.n(i),n=(s(17046),s(97023)),o=s.n(n);const r="backstage",l=[],c=e=>{let{error:t=null,errors:s=l,iconClassName:i,margin:a,textClassName:n,type:c}=e;if(!t&&0===s.length)return null;let d=t;if(!d)for(const e of s)e&&(d=e);return d?"modal"===c?o().createElement("div",{className:"form-group"},o().createElement("label",{className:"col-sm-12 has-error"},d)):c===r?o().createElement("div",{className:"pull-left has-error"},o().createElement("label",{className:"control-label"},d)):a?o().createElement("div",{className:"form-group has-error"},o().createElement("label",{className:"control-label"},d)):o().createElement("div",{className:"col-sm-12 ".concat(n||"has-error")},o().createElement("label",{className:"control-label"},o().createElement("i",{className:"fa ".concat(i||"fa-exclamation-circle")})," ",d)):null};c.propTypes={type:a().node,error:a().node,textClassName:a().string,iconClassName:a().string,margin:a().bool,errors:a().arrayOf(a().node)};const d=o().memo(c)},5986:(e,t,s)=>{s.d(t,{A:()=>l}),s(29206),s(57406),s(55448);var i=s(97023),a=s.n(i),n=s(14778);const o=["placeholder"],r=a().forwardRef(((e,t)=>{let{placeholder:s}=e,i=function(e,t){if(null==e)return{};var s,i,a=function(e,t){if(null==e)return{};var s={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;s[i]=e[i]}return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)s=n[i],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}(e,o);const r=(0,n.useIntl)();return a().createElement("textarea",Object.assign({ref:t,placeholder:r.formatMessage(s)},i))}));r.displayName="LocalizedPlaceholderTextarea";const l=r},48729:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(62688),a=s.n(i),n=s(97023),o=s.n(n),r=s(94112),l=s(59171);const c=e=>{let{active:t,areAllSectionsInactive:s,section:i,max:a,updateSection:c,title:d,isDisabled:u,describe:m,collapsedEditButtonWhenDisabled:p}=e;const h=(0,n.useRef)(null);return(0,l.A)((()=>{var e;!t&&s&&(null===(e=h.current)||void 0===e||e.focus())}),[t]),t?o().createElement(o().Fragment,null,a):o().createElement(r.A,{ref:h,title:d,updateSection:c,describe:m,section:i,isDisabled:u,collapsedEditButtonWhenDisabled:p})};c.propTypes={active:a().bool.isRequired,areAllSectionsInactive:a().bool.isRequired,section:a().string.isRequired,max:a().node,updateSection:a().func.isRequired,title:a().node,isDisabled:a().bool,describe:a().node,collapsedEditButtonWhenDisabled:a().node};const d=o().memo(c)},98362:(e,t,s)=>{s.d(t,{A:()=>p}),s(4290);var i=s(71633),a=s.n(i),n=s(97023),o=s.n(n),r=s(14778),l=s(14309),c=s(78451),d=s(19513),u=s(85873);function m(e,t,s){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class p extends o().PureComponent{constructor(e){super(e),m(this,"onKeyDown",(e=>{const t=e.target;this.props.shiftEnter&&(0,d.e)(e,c.Ay.KeyCodes.ENTER)&&e.shiftKey||!0!==this.props.disableEnterSubmit&&(0,d.e)(e,c.Ay.KeyCodes.ENTER)&&this.props.submit&&"SELECT"!==t.tagName&&t.parentElement&&"react-select__input"!==t.parentElement.className&&!t.classList.contains("btn-tertiary")&&this.settingList.current&&this.settingList.current.contains(t)&&this.handleSubmit(e)})),m(this,"handleSubmit",(e=>{e.preventDefault(),this.props.setting&&this.props.submit?this.props.submit(this.props.setting):this.props.submit&&this.props.submit()})),m(this,"handleUpdateSection",(e=>{this.props.updateSection&&this.props.updateSection(this.props.section),e.preventDefault()})),this.settingList=o().createRef()}componentDidMount(){if(this.settingList.current){const e=this.settingList.current.querySelectorAll('.btn:not(.save-button):not(.btn-tertiary), input.form-control, input[type="radio"][checked], input[type="checkbox"], select, textarea, [tabindex]:not([tabindex="-1"])');e.length>0?(0,u.b6)(e[0]):(0,u.b6)(this.settingList.current)}document.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeyDown)}render(){let e=null;this.props.serverError&&(e=o().createElement("div",{className:"form-group"},o().createElement("label",{className:"col-sm-12 has-error"},o().createElement("i",{className:"icon icon-alert-circle-outline",role:"presentation"}),o().createElement("span",{className:"sr-only"},o().createElement(r.FormattedMessage,{id:"setting_item_max.error",defaultMessage:"Error"})),o().createElement("span",{id:"serverError"},this.props.serverError))));let t=null,s="setting-list__hint";"top"===this.props.infoPosition&&(s="pb-3"),this.props.extraInfo&&(t=o().createElement("div",{id:"extraInfo",className:s},this.props.extraInfo));let i=null;this.props.submit&&(i=o().createElement(l.A,{defaultMessage:this.props.saveButtonText,saving:this.props.saving,disabled:this.props.saving||!1===this.props.isValid,onClick:this.handleSubmit,btnClass:this.props.saveButtonClassName}));const n=this.props.inputs;let c;this.props.title&&(c=o().createElement("h4",{id:"settingTitle",className:"col-sm-12 section-title"},this.props.title));let d,u=o().createElement("div",{className:"setting-list-item"},n,t);return"top"===this.props.infoPosition&&(u=o().createElement("div",null,t,n)),d=this.props.cancelButtonText?this.props.cancelButtonText:o().createElement(r.FormattedMessage,{id:"setting_item_max.cancel",defaultMessage:"Cancel"}),o().createElement("section",{className:"section-max form-horizontal ".concat(this.props.containerStyle),ref:this.settingList},c,this.props.extraContentBeforeSettingList,o().createElement("div",{className:a()("sectionContent",{"col-sm-12":this.props.isFullWidth,"col-sm-10 col-sm-offset-2":!this.props.isFullWidth})},o().createElement("div",{tabIndex:-1,className:"setting-list"},u,o().createElement("div",{className:"setting-list-item"},o().createElement("hr",null),this.props.submitExtra,o().createElement("div",{role:"alert"},e),i,o().createElement("button",{id:"cancelSetting",className:"btn btn-tertiary",onClick:this.handleUpdateSection},d)))))}}m(p,"defaultProps",{infoPosition:"bottom",saving:!1,section:"",containerStyle:""})},94112:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(62688),a=s.n(i),n=(s(17046),s(4290),s(71633)),o=s.n(n),r=s(97023),l=s.n(r),c=s(14778),d=s(12026),u=s(85873);function m(e,t,s){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class p extends l().PureComponent{constructor(){super(...arguments),m(this,"edit",null),m(this,"getEdit",(e=>{this.edit=e})),m(this,"handleClick",(e=>{this.props.isDisabled||(e.preventDefault(),this.props.updateSection(this.props.section))}))}focus(){(0,u.b6)(this.edit)}render(){let e;return e=this.props.isDisabled?this.props.collapsedEditButtonWhenDisabled?this.props.collapsedEditButtonWhenDisabled:null:l().createElement("button",{ref:this.getEdit,id:this.props.section+"Edit",className:"color--link style--none section-min__edit",onClick:this.handleClick,"aria-labelledby":this.props.section+"Title "+this.props.section+"Edit","aria-expanded":!1},l().createElement(d.A,null),l().createElement(c.FormattedMessage,{id:"setting_item_min.edit",defaultMessage:"Edit"})),l().createElement("div",{className:o()("section-min",{isDisabled:this.props.isDisabled}),onClick:this.handleClick},l().createElement("div",{className:"secion-min__header"},l().createElement("h4",{id:this.props.section+"Title",className:o()("section-min__title",{isDisabled:this.props.isDisabled})},this.props.title),e),l().createElement("div",{id:this.props.section+"Desc",className:o()("section-min__describe",{isDisabled:this.props.isDisabled})},this.props.describe))}}m(p,"propTypes",{title:a().node.isRequired,isDisabled:a().bool,section:a().string.isRequired,updateSection:a().func.isRequired,describe:a().node,collapsedEditButtonWhenDisabled:a().node})},93247:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(62688),a=s.n(i),n=s(97023),o=s.n(n);function r(e){return o().createElement("div",{className:"userSettingDesktopHeader"},o().createElement("h3",{id:e.id,className:"tab-header"},e.text),e.info&&o().createElement("div",{className:"userSettingDesktopHeaderInfo"},e.info))}r.propTypes={id:a().string,text:a().node.isRequired,info:a().node}},98113:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(62688),a=s.n(i),n=s(97023),o=s.n(n),r=s(14778);const l=e=>{let{text:t,closeModal:s,collapseModal:i}=e;const a=(0,r.useIntl)();return o().createElement("div",{className:"modal-header"},o().createElement("button",{id:"closeButton",type:"button",className:"close","data-dismiss":"modal",onClick:s},o().createElement("span",{"aria-hidden":"true"},"×")),o().createElement("h4",{className:"modal-title"},o().createElement("div",{className:"modal-back"},o().createElement("i",{className:"fa fa-angle-left","aria-label":a.formatMessage({id:"generic_icons.collapse",defaultMessage:"Collapse Icon"}),onClick:i})),t))};l.propTypes={text:a().node.isRequired,closeModal:a().func.isRequired,collapseModal:a().func.isRequired};const c=l},26624:(e,t,s)=>{s.d(t,{N5:()=>ve,Ay:()=>ke}),s(57406),s(55448),s(29206),s(43813),s(3188),s(59297),s(76685),s(17046),s(4290);var i=s(97023),a=s.n(i),n=s(14778),o=s(64174),r=s(66963),l=s(85406),c=s(66276),d=s(59671),u=s(17518),m=s(48729),p=s(98362),h=s(3289),f=s(78451),g=s(36003),b=s(85873),E=s(46005),v=s(94112),y=s(28580),M=s(24867);function S(){const e=(0,n.useIntl)(),t=(0,i.useCallback)((()=>{window.open("https://mattermost.com/pl/manage-notifications","_blank","noopener,noreferrer")}),[]);return a().createElement("div",{className:"extraContentBeforeSettingList"},a().createElement(M.A,{type:"danger",title:e.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionDenied.title",defaultMessage:"Browser notification permission was denied"}),text:e.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionDenied.message",defaultMessage:"You're missing important message and call notifications from Mattermost. To start receiving notifications, please enable notifications for Mattermost in your browser settings."}),tertiaryButton:{text:e.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionDenied.button",defaultMessage:"How to enable notifications"}),onClick:t}}))}var k=s(62688),N=s.n(k),w=s(73170);function A(e){const t=(0,n.useIntl)(),s=(0,i.useCallback)((async()=>{const t=await(0,w.mT)();t&&e.onCtaButtonClick(t)}),[e.onCtaButtonClick]);return a().createElement("div",{className:"extraContentBeforeSettingList"},a().createElement(M.A,{type:"danger",title:t.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionNeverGranted.title",defaultMessage:"Browser notifications are disabled"}),text:t.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionNeverGranted.message",defaultMessage:"You're missing important message and call notifications from Mattermost. Mattermost notifications are disabled by this browser."}),primaryButton:{text:t.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionNeverGranted.button",defaultMessage:"Enable notifications"}),onClick:s}}))}function I(){const e=(0,n.useIntl)(),t=(0,i.useCallback)((async()=>{window.open("https://mattermost.com/pl/pc-web-requirements","_blank","noopener,noreferrer")}),[]);return a().createElement("div",{className:"extraContentBeforeSettingList"},a().createElement(M.A,{type:"danger",title:e.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionUnsupported.title",defaultMessage:"Browser notifications unsupported"}),text:e.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionUnsupported.message",defaultMessage:"You're missing important message and call notifications from Mattermost. To start receiving notifications, please update to a supported browser."}),tertiaryButton:{text:e.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionUnsupported.button",defaultMessage:"Update your browser"}),onClick:t}}))}function _(e){const t=(0,n.useIntl)(),[s,o]=(0,i.useState)(!1),r=(0,i.useCallback)((()=>{window.open("https://mattermost.com/pl/manage-notifications","_blank","noopener,noreferrer")}),[]),l=s?t.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionDeniedDesktop.titleDenied",defaultMessage:"Desktop notifications permission was denied"}):t.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionDeniedDesktop.title",defaultMessage:"Desktop notifications permission required"}),c=s?t.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionDeniedDesktop.messageDenied",defaultMessage:"Notifications for this Mattermost server are blocked. To receive notifications, please enable them manually."}):t.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionDeniedDesktop.message",defaultMessage:"You're missing important message and call notifications from Mattermost. To start receiving them, please enable them manually."});return a().createElement("div",{className:"extraContentBeforeSettingList"},a().createElement(M.A,{type:"danger",title:l,text:c,primaryButton:{text:t.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionDeniedDesktop.checkPermissionButton",defaultMessage:"Check permission"}),onClick:async function(){await e.requestDesktopNotificationPermission()===w.yv&&o(!0)},disabled:s},tertiaryButton:{text:t.formatMessage({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionDenied.instructionButton",defaultMessage:"How to enable notifications"}),onClick:r}}))}function C(){const e=(0,w.Ml)(),[t,s]=(0,i.useState)((0,w.hH)()),[n,o]=(0,y.L)();return e?n===w.yv?a().createElement(_,{requestDesktopNotificationPermission:o}):e&&t===w.s$?a().createElement(A,{onCtaButtonClick:function(e){s(e)}}):e&&t===w.yv?a().createElement(S,null):null:a().createElement(I,null)}A.propTypes={onCtaButtonClick:N().func.isRequired},_.propTypes={requestDesktopNotificationPermission:N().func.isRequired};var R=s(67416);function T(){const{formatMessage:e}=(0,n.useIntl)(),[t]=(0,y.L)();return(0,w.Ml)()?(0,w.hH)()===w.s$||(0,w.hH)()===w.yv||t===w.yv?a().createElement(R.A,{size:"sm",variant:"dangerDim",icon:"alert-outline",text:e({id:"user.settings.notifications.desktopAndMobile.notificationSection.permissionIssueTag",defaultMessage:"Permission required"})}):null:a().createElement(R.A,{size:"sm",variant:"danger",icon:"alert-outline",text:e({id:"user.settings.notifications.desktopAndMobile.notificationSection.noPermissionIssueTag",defaultMessage:"Not supported"})})}var O=s(63867),L=s(45036);function F(e){let{active:t,updateSection:s,onSubmit:o,onCancel:r,saving:l,error:c,setParentState:d,areAllSectionsInactive:u,isCollapsedThreadsEnabled:m,desktopActivity:h,sendPushNotifications:g,pushActivity:b,pushStatus:y,desktopThreads:M,pushThreads:S,desktopAndMobileSettingsDifferent:k}=e;const N=(0,i.useRef)(null),w=(0,i.useRef)(t),A=(0,n.useIntl)();(0,i.useEffect)((()=>{var e;w.current&&!t&&u&&(null===(e=N.current)||void 0===e||e.focus()),w.current=t}),[t,u]);const I=(0,i.useCallback)((e=>{const t=e.target.value;d("desktopActivity",t)}),[d]),_=(0,i.useCallback)((e=>{const t=e.target.checked?f.DB.ALL:f.DB.MENTION;d("desktopThreads",t)}),[d]),R=(0,i.useCallback)((e=>{const t=e.target.checked;d("desktopAndMobileSettingsDifferent",t)}),[d]),F=(0,i.useCallback)((e=>{e&&"value"in e&&d("pushActivity",e.value)}),[d]),B=(0,i.useCallback)((e=>{const t=e.target.checked?f.DB.ALL:f.DB.MENTION;d("pushThreads",t)}),[d]),q=(0,i.useCallback)((e=>{e&&"value"in e&&d("pushStatus",e.value)}),[d]),H=(0,i.useMemo)((()=>{const e=[],t=a().createElement("fieldset",{id:"sendDesktopNotificationsSection",key:"sendDesktopNotificationsSection"},a().createElement("legend",{className:"form-legend"},a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.sendDesktopNotificationFor",defaultMessage:"Send notifications for:"})),x.map((e=>a().createElement("div",{key:e.value,className:"radio"},a().createElement("label",null,a().createElement("input",{type:"radio",checked:h===e.value,value:e.value,onChange:I}),(0,L.fB)(e.label))))));if(e.push(t),function(e,t){return!!e&&(t!==f.DB.ALL&&t!==f.DB.NONE)}(m,h)){const t=a().createElement(i.Fragment,{key:"desktopThreadNotificationSection"},a().createElement("br",null),a().createElement("div",{className:"checkbox single-checkbox"},a().createElement("label",null,a().createElement("input",{type:"checkbox",checked:M===f.DB.ALL,onChange:_}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.notifyForDesktopthreads",defaultMessage:"Notify me about replies to threads I'm following"}))));e.push(t)}if(g){const t=a().createElement(i.Fragment,{key:"differentMobileNotificationsSection"},a().createElement("hr",null),a().createElement("div",{className:"checkbox single-checkbox"},a().createElement("label",null,a().createElement("input",{type:"checkbox",checked:k,onChange:R}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.differentMobileNotificationsTitle",defaultMessage:"Use different settings for my mobile devices"}))));e.push(t)}if(function(e,t){return!!e&&!!t}(g,k)){const t=a().createElement(a().Fragment,{key:"sendMobileNotificationsSection"},a().createElement("br",null),a().createElement("label",{id:"sendMobileNotificationsLabel",htmlFor:"sendMobileNotificationsSelectInput",className:"singleSelectLabel"},a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.sendMobileNotificationsFor",defaultMessage:"Send mobile notifications for:"})),a().createElement(E.Ay,{inputId:"sendMobileNotificationsSelectInput","aria-labelledby":"sendMobileNotificationsLabel",className:"react-select singleSelect",classNamePrefix:"react-select",options:x,isClearable:!1,isSearchable:!1,components:{IndicatorSeparator:D},value:U(b),onChange:F,getOptionLabel:e=>(0,O.O)(e,A)}));e.push(t)}if(function(e,t,s,i){return!!e&&(!!t&&(!!s&&(i!==f.DB.ALL&&i!==f.DB.NONE)))}(g,m,k,b)){const t=a().createElement(i.Fragment,{key:"threadNotificationSection"},a().createElement("br",null),a().createElement("div",{className:"checkbox single-checkbox"},a().createElement("label",null,a().createElement("input",{type:"checkbox",checked:S===f.DB.ALL,onChange:B}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.notifyForMobilethreads",defaultMessage:"Notify me on mobile about replies to threads I'm following"}))));e.push(t)}if(function(e,t,s,i){return!!e&&(!t||!s||(i?s!==f.DB.NONE:t!==f.DB.NONE))}(g,h,b,k)){const t=a().createElement(a().Fragment,{key:"triggerMobileNotificationsSection"},a().createElement("br",null),a().createElement("label",{id:"pushMobileNotificationsLabel",htmlFor:"pushMobileNotificationSelectInput",className:"singleSelectLabel"},a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.pushNotification",defaultMessage:"Trigger mobile notifications when I am:"})),a().createElement(E.Ay,{inputId:"pushMobileNotificationSelectInput","aria-labelledby":"pushMobileNotificationsLabel",className:"react-select singleSelect",classNamePrefix:"react-select",options:W,isClearable:!1,isSearchable:!1,components:{IndicatorSeparator:D},value:P(y),onChange:q,getOptionLabel:e=>(0,O.O)(e,A)}));e.push(t)}if(!g){const t=a().createElement(a().Fragment,null,a().createElement("br",null),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.pushNotificationsDisabled",defaultMessage:"Mobile push notifications haven't been enabled by your system administrator."}));e.push(t)}return e}),[h,I,m,M,_,g,k,R,b,F,S,B,y,q]);return t?a().createElement(p.A,{title:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.title",defaultMessage:"Desktop and mobile notifications"}),inputs:H,submit:o,saving:l,serverError:c,updateSection:function(e){s(e)},extraContentBeforeSettingList:a().createElement(C,null)}):a().createElement(v.A,{ref:N,title:a().createElement(a().Fragment,null,a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.title",defaultMessage:"Desktop and mobile notifications"}),a().createElement(T,null)),describe:K(h,b),section:f.Y$.DESKTOP_AND_MOBILE,updateSection:function(e){s(e),r()}})}function D(){return null}const x=[{label:(0,n.defineMessage)({id:"user.settings.notifications.desktopAndMobile.allNewMessages",defaultMessage:"All new messages"}),value:f.DB.ALL},{label:(0,n.defineMessage)({id:"user.settings.notifications.desktopAndMobile.onlyMentions",defaultMessage:"Mentions, direct messages, and group messages"}),value:f.DB.MENTION},{label:(0,n.defineMessage)({id:"user.settings.notifications.desktopAndMobile.nothing",defaultMessage:"Nothing"}),value:f.DB.NONE}];function U(e){if(!e)return x[1];return x.find((t=>t.value===e))||x[1]}const W=[{label:(0,n.defineMessage)({id:"user.settings.notifications.desktopAndMobile.online",defaultMessage:"Online, away, or offline"}),value:f.Ay.UserStatuses.ONLINE},{label:(0,n.defineMessage)({id:"user.settings.notifications.desktopAndMobile.away",defaultMessage:"Away or offline"}),value:f.Ay.UserStatuses.AWAY},{label:(0,n.defineMessage)({id:"user.settings.notifications.desktopAndMobile.offline",defaultMessage:"Offline"}),value:f.Ay.UserStatuses.OFFLINE}];function P(e){if(!e)return W[2];return W.find((t=>t.value===e))||W[2]}function K(e,t){if(e===f.DB.ALL){if(t===f.DB.ALL)return a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.allForDesktopAndMobile",defaultMessage:"All new messages"});if(t===f.DB.MENTION)return a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.allDesktopButMobileMentions",defaultMessage:"All new messages on desktop; mentions, direct messages, and group messages on mobile"});if(t===f.DB.NONE)return a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.allDesktopButMobileNone",defaultMessage:"All new messages on desktop; never on mobile"})}else if(e===f.DB.MENTION){if(t===f.DB.ALL)return a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.mentionsDesktopButMobileAll",defaultMessage:"Mentions, direct messages, and group messages on desktop; all new messages on mobile"});if(t===f.DB.MENTION)return a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.mentionsForDesktopAndMobile",defaultMessage:"Mentions, direct messages, and group messages"});if(t===f.DB.NONE)return a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.mentionsForDesktopButMobileNone",defaultMessage:"Mentions, direct messages, and group messages on desktop; never on mobile"})}else if(e===f.DB.NONE){if(t===f.DB.ALL)return a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.noneDesktopButMobileAll",defaultMessage:"Never on desktop; all new messages on mobile"});if(t===f.DB.MENTION)return a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.noneDesktopButMobileMentions",defaultMessage:"Never on desktop; mentions, direct messages, and group messages on mobile"});if(t===f.DB.NONE)return a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.noneForDesktopAndMobile",defaultMessage:"Never"})}return a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopAndMobile.noValidSettings",defaultMessage:"Configure desktop and mobile settings"})}const B=(0,i.memo)(F);function q(e){let{active:t,updateSection:s,onSubmit:o,onCancel:r,saving:l,error:c,setParentState:d,areAllSectionsInactive:u,desktopSound:m,desktopNotificationSound:h,isCallsRingingEnabled:b,callsDesktopSound:y,callsNotificationSound:M}=e;const S=(0,n.useIntl)(),k=(0,i.useRef)(null),N=(0,i.useRef)(t);(0,i.useEffect)((()=>{var e;N.current&&!t&&u&&(null===(e=k.current)||void 0===e||e.focus()),N.current=t}),[t,u]);const w=(0,i.useCallback)((e=>{const t=e.target.checked?"true":"false";d("desktopSound",t),"false"===t&&(0,g.$c)()}),[d]),A=(0,i.useCallback)((e=>{const t=e.target.checked?"true":"false";d("callsDesktopSound",t),"false"===t&&(0,g.$c)()}),[d]),I=(0,i.useCallback)((e=>{(0,g.$c)(),e&&"value"in e&&(d("desktopNotificationSound",e.value),(0,g.Yx)(e.value))}),[d]),_=(0,i.useCallback)((e=>{(0,g.$c)(),e&&"value"in e&&(d("callsNotificationSound",e.value),(0,g.n_)(e.value))}),[d]),C=(0,i.useMemo)((()=>{const e=[],t="true"===m,s=a().createElement(i.Fragment,{key:"messageSoundSection"},a().createElement("div",{className:"checkbox inlineCheckboxSelect"},a().createElement("label",null,a().createElement("input",{type:"checkbox",checked:"true"===m,onChange:w}),a().createElement("span",{id:"messageNotificationSoundLabel"},a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopNotificationSound.messageNotificationSound",defaultMessage:"Message notification sound"}))),a().createElement(E.Ay,{id:"messageNotificationSoundSelect",inputId:"messageNotificationSoundSelectInput",className:"react-select inlineSelect",classNamePrefix:"react-select",options:g.Il,isClearable:!1,isSearchable:!1,isDisabled:!t,placeholder:S.formatMessage({id:"user.settings.notifications.desktopNotificationSound.soundSelectPlaceholder",defaultMessage:"Select a sound"}),components:{IndicatorSeparator:H},value:(0,g.ed)(h),onChange:I,"aria-labelledby":"messageNotificationSoundLabel",getOptionLabel:e=>(0,O.O)(e,S)})));if(e.push(s),b){const t="true"===y,s=a().createElement(i.Fragment,{key:"callSoundSection"},a().createElement("br",null),a().createElement("div",{className:"checkbox inlineCheckboxSelect"},a().createElement("label",null,a().createElement("input",{type:"checkbox",checked:t,onChange:A}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopNotificationSound.incomingCallSound",defaultMessage:"Incoming call sound"})),a().createElement(E.Ay,{id:"incomingCallSoundNotificationSelect",inputId:"incomingCallSoundNotificationSelectInput",className:"react-select inlineSelect",classNamePrefix:"react-select",options:g.s5,isClearable:!1,isSearchable:!1,isDisabled:!t,components:{IndicatorSeparator:H},placeholder:S.formatMessage({id:"user.settings.notifications.desktopNotificationSound.soundSelectPlaceholder",defaultMessage:"Select a sound"}),value:(0,g.rP)(M),onChange:_,getOptionLabel:e=>(0,O.O)(e,S)})));e.push(s)}return e}),[m,w,I,h,b,y,A,M,_]);return t?a().createElement(p.A,{title:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopNotificationSounds.title",defaultMessage:"Desktop notification sounds"}),inputs:C,submit:function(){(0,g.$c)(),o()},saving:l,serverError:c,updateSection:function(e){(0,g.$c)(),s(e)}}):a().createElement(v.A,{ref:k,title:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopNotificationSounds.title",defaultMessage:"Desktop notification sounds"}),describe:V(b,m,h,y,M),section:f.Y$.DESKTOP_NOTIFICATION_SOUND,updateSection:function(e){(0,g.$c)(),s(e),r()}})}function H(){return null}function V(e,t,s,i,o){const r=g.x.includes(s),l=g.zJ.includes(o);let c=null;e&&l&&(c="true"===i);let d=null;return r&&(d="true"===t),null!==d&&null!==c?d&&c?a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopNotificationSound.hasDesktopAndCallsSound",defaultMessage:'"{desktopSound}" for messages, "{callsSound}" for calls',values:{desktopSound:s,callsSound:o}}):!d&&c?a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopNotificationSound.noDesktopAndhasCallsSound",defaultMessage:'No sound for messages, "{callsSound}" for calls',values:{callsSound:o}}):d&&!c?a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopNotificationSound.hasDesktopAndNoCallsSound",defaultMessage:'"{desktopSound}" for messages, no sound for calls',values:{desktopSound:s}}):a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopNotificationSound.noDesktopAndNoCallsSound",defaultMessage:"No sound"}):null!==d&&null===c?d?a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopNotificationSound.hasDesktopSound",defaultMessage:'"{desktopSound}" for messages',values:{desktopSound:s}}):a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopNotificationSound.noDesktopSound",defaultMessage:"No sound"}):a().createElement(n.FormattedMessage,{id:"user.settings.notifications.desktopNotificationSound.noValidSound",defaultMessage:"Configure desktop notification sounds"})}q.propTypes={active:N().bool.isRequired,updateSection:N().func.isRequired,onSubmit:N().func.isRequired,onCancel:N().func.isRequired,saving:N().bool.isRequired,error:N().string.isRequired,setParentState:N().func.isRequired,areAllSectionsInactive:N().bool.isRequired};const j=(0,i.memo)(q);s(83931),s(10844);var Y=s(23453),G=s(5908),$=s(35631),z=s(40057),X=s(3569),Z=s(26614),J=s(77440);function Q(e,t,s){const{INTERVAL_NEVER:i,INTERVAL_IMMEDIATE:a,INTERVAL_FIFTEEN_MINUTES:n,INTERVAL_HOUR:o}=z.pm,r=[a,i];return e?t&&-1===[a,i,n,o].indexOf(s)?n:t||-1!==r.indexOf(s)?e&&s===i?a:s:a:i}function ee(e,t,s){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class te extends a().PureComponent{constructor(e){super(e),ee(this,"handleChange",(e=>{const t=e.currentTarget.getAttribute("data-enable-email"),s=parseInt(e.currentTarget.getAttribute("data-email-interval"),10);this.setState({enableEmail:"true"===t,newInterval:s}),(0,b.b6)(e.currentTarget),this.props.onChange(t)})),ee(this,"handleThreadsOnChange",(e=>{const t=e.target.checked?f.DB.ALL:f.DB.MENTION;this.props.setParentState("emailThreads",t)})),ee(this,"handleSubmit",(async()=>{const{newInterval:e}=this.state;if(this.props.emailInterval===e&&this.props.enableEmail===this.state.enableEmail)this.props.updateSection("");else{const{currentUserId:t,actions:s}=this.props,i={user_id:t,category:f.pm.CATEGORY_NOTIFICATIONS,name:f.pm.EMAIL_INTERVAL,value:e.toString()};await s.savePreferences(t,[i])}this.props.onSubmit()})),ee(this,"handleUpdateSection",(e=>{e?this.props.updateSection(e):(this.props.updateSection(""),this.setState({enableEmail:this.props.enableEmail,newInterval:this.props.emailInterval}),this.props.onCancel())})),ee(this,"renderMinSettingView",(()=>{const{enableEmail:e,sendEmailNotifications:t}=this.props,{newInterval:s}=this.state;let i;if(t)if(e)switch(s){case f.pm.INTERVAL_IMMEDIATE:i=this.props.enableEmailBatching?a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.asSoonAsYouAreAwayForFiveMinutes",defaultMessage:"As soon as you’re away for 5 minutes"}):a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.on",defaultMessage:"On"});break;case f.pm.INTERVAL_HOUR:i=a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.everyHour",defaultMessage:"Every hour"});break;case f.pm.INTERVAL_FIFTEEN_MINUTES:i=a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.everyXMinutes",defaultMessage:"Every {count, plural, one {minute} other {{count, number} minutes}}",values:{count:s/60}});break;default:i=this.props.enableEmailBatching?a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.never",defaultMessage:"Never"}):a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.off",defaultMessage:"Off"})}else i=this.props.enableEmailBatching?a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.never",defaultMessage:"Never"}):a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.off",defaultMessage:"Off"});else i=a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.disabled",defaultMessage:"Email notifications are not enabled"});return a().createElement(v.A,{ref:this.editButtonRef,title:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.emailNotifications",defaultMessage:"Email notifications"}),describe:i,section:"email",updateSection:this.handleUpdateSection})})),ee(this,"renderMaxSettingView",(()=>{if(!this.props.sendEmailNotifications)return a().createElement(p.A,{title:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.emailNotifications",defaultMessage:"Email notifications"}),inputs:[a().createElement("div",{key:"oauthEmailInfo",className:"pt-2"},a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.disabled_long",defaultMessage:"Email notifications have not been enabled by your System Administrator."}))],serverError:this.props.error,section:"email",updateSection:this.handleUpdateSection});const{newInterval:e}=this.state;let t=null,s=null,i=null;this.props.enableEmailBatching?(t=a().createElement("fieldset",null,a().createElement("div",{className:"radio"},a().createElement("label",null,a().createElement("input",{id:"emailNotificationImmediately",type:"radio",name:"emailNotifications",checked:e===f.pm.INTERVAL_IMMEDIATE,"data-enable-email":"true","data-email-interval":f.pm.INTERVAL_IMMEDIATE,onChange:this.handleChange}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.asSoonAsYouAreAwayForFiveMinutes",defaultMessage:"As soon as you’re away for 5 minutes"}))),a().createElement("div",{className:"radio"},a().createElement("label",null,a().createElement("input",{id:"emailNotificationMinutes",type:"radio",name:"emailNotifications",checked:e===f.pm.INTERVAL_FIFTEEN_MINUTES,"data-enable-email":"true","data-email-interval":f.pm.INTERVAL_FIFTEEN_MINUTES,onChange:this.handleChange}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.everyXMinutes",defaultMessage:"Every {count, plural, one {minute} other {{count, number} minutes}}",values:{count:f.pm.INTERVAL_FIFTEEN_MINUTES/60}}))),a().createElement("div",{className:"radio"},a().createElement("label",null,a().createElement("input",{id:"emailNotificationHour",type:"radio",name:"emailNotifications",checked:e===f.pm.INTERVAL_HOUR,"data-enable-email":"true","data-email-interval":f.pm.INTERVAL_HOUR,onChange:this.handleChange}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.everyHour",defaultMessage:"Every hour"}))),a().createElement("div",{className:"radio"},a().createElement("label",null,a().createElement("input",{id:"emailNotificationNever",type:"radio",name:"emailNotifications",checked:e===f.pm.INTERVAL_NEVER,"data-enable-email":"false","data-email-interval":f.pm.INTERVAL_NEVER,onChange:this.handleChange}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.never",defaultMessage:"Never"})))),s=a().createElement(n.FormattedMessage,{id:"user.settings.notifications.emailBatchingInfo",defaultMessage:"Email notifications are sent for mentions and direct messages when you are offline or away for more than 5 minutes. If you choose to receive notifications every 15 minutes or every hour, notifications during that period will be combined into a single email."}),i=a().createElement("legend",{className:"form-legend"},a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.send",defaultMessage:"Send email notifications"}))):(t=a().createElement("fieldset",null,a().createElement("div",{className:"radio"},a().createElement("label",null,a().createElement("input",{id:"emailNotificationImmediately",type:"radio",name:"emailNotifications",checked:e===f.pm.INTERVAL_IMMEDIATE,"data-enable-email":"true","data-email-interval":f.pm.INTERVAL_IMMEDIATE,onChange:this.handleChange}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.on",defaultMessage:"On"}))),a().createElement("div",{className:"radio"},a().createElement("label",null,a().createElement("input",{id:"emailNotificationNever",type:"radio",name:"emailNotifications",checked:e===f.pm.INTERVAL_NEVER,"data-enable-email":"false","data-email-interval":f.pm.INTERVAL_NEVER,onChange:this.handleChange}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.off",defaultMessage:"Off"})))),s=a().createElement(n.FormattedMessage,{id:"user.settings.notifications.emailInfo",defaultMessage:"When enabled, email notifications are sent for mentions and direct messages when you are offline or away for more than 5 minutes."}));let o=null;return this.props.isCollapsedThreadsEnabled&&this.props.enableEmail&&(o=a().createElement(a().Fragment,{key:"userNotificationEmailThreadsOptions"},a().createElement("hr",null),a().createElement("fieldset",null,a().createElement("div",{className:"checkbox single-checkbox"},a().createElement("label",null,a().createElement("input",{id:"desktopThreadsNotificationAllActivity",type:"checkbox",name:"desktopThreadsNotificationLevel",checked:this.props.threads===f.DB.ALL,onChange:this.handleThreadsOnChange}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.email.notifyForthreads",defaultMessage:"Notify me about replies to threads I’m following"})))))),a().createElement(p.A,{title:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.emailNotifications",defaultMessage:"Email notifications"}),inputs:[a().createElement("fieldset",{key:"userNotificationEmailOptions"},i,t,a().createElement("div",{className:"mt-3"},s)),o],submit:this.handleSubmit,saving:this.props.saving,serverError:this.props.error,updateSection:this.handleUpdateSection})}));const{emailInterval:t,enableEmail:s,enableEmailBatching:i,sendEmailNotifications:o,active:r}=e;this.state={active:r,emailInterval:t,enableEmail:s,enableEmailBatching:i,sendEmailNotifications:o,newInterval:Q(s&&o,i,t)},this.editButtonRef=a().createRef()}static getDerivedStateFromProps(e,t){const{emailInterval:s,enableEmail:i,enableEmailBatching:a,sendEmailNotifications:n,active:o}=e;return o&&!t.active||n!==t.sendEmailNotifications||a!==t.enableEmailBatching||s!==t.emailInterval||o!==t.active?{active:o,emailInterval:s,enableEmail:i,enableEmailBatching:a,sendEmailNotifications:n,newInterval:Q(i&&n,a,s)}:null}focusEditButton(){var e;null===(e=this.editButtonRef.current)||void 0===e||e.focus()}componentDidUpdate(e){e.active&&!this.props.active&&this.props.areAllSectionsInactive&&this.focusEditButton()}render(){return this.props.active?this.renderMaxSettingView():this.renderMinSettingView()}}ee(te,"propTypes",{active:N().bool.isRequired,updateSection:N().func.isRequired,onSubmit:N().func.isRequired,onCancel:N().func.isRequired,saving:N().bool,error:N().string,setParentState:N().func.isRequired,areAllSectionsInactive:N().bool.isRequired,isCollapsedThreadsEnabled:N().bool.isRequired,enableEmail:N().bool.isRequired,onChange:N().func.isRequired,threads:N().string.isRequired,currentUserId:N().string.isRequired,emailInterval:N().number.isRequired,sendEmailNotifications:N().bool.isRequired,enableEmailBatching:N().bool.isRequired,actions:N().shape({savePreferences:N().func.isRequired}).isRequired});const se=(0,Y.connect)((function(e){const t=(0,Z.zj)(e),s=parseInt((0,J.Jt)(e,z.pm.CATEGORY_NOTIFICATIONS,z.pm.EMAIL_INTERVAL,z.pm.INTERVAL_NOT_SET.toString()),10);return{currentUserId:(0,X.WR)(e),emailInterval:s,enableEmailBatching:"true"===t.EnableEmailBatching,sendEmailNotifications:"true"===t.SendEmailNotifications}}),(function(e){return{actions:(0,G.bindActionCreators)({savePreferences:$.SF},e)}}))(te);var ie=s(5986);function ae(e,t,s){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ne extends a().PureComponent{constructor(){super(...arguments),ae(this,"handleAutoResponderChecked",(e=>{this.props.setParentState("autoResponderActive",e.target.checked)})),ae(this,"onMessageChanged",(e=>{this.props.setParentState("autoResponderMessage",e.target.value)}))}render(){const{autoResponderActive:e,autoResponderMessage:t}=this.props;let s;this.props.error&&(s=a().createElement("label",{className:"has-error"},this.props.error));const i=[],o=a().createElement("div",{id:"autoResponderCheckbox",key:"autoResponderCheckbox",className:"checkbox"},a().createElement("label",null,a().createElement("input",{id:"autoResponderActive",type:"checkbox",checked:e,onChange:this.handleAutoResponderChecked}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.autoResponderEnabled",defaultMessage:"Enabled"}))),r=a().createElement("div",{id:"autoResponderMessage",key:"autoResponderMessage"},a().createElement("div",{className:"pt-2"},a().createElement(ie.A,{style:{resize:"none",height:"auto"},id:"autoResponderMessageInput",className:"form-control",rows:5,placeholder:(0,n.defineMessage)({id:"user.settings.notifications.autoResponderPlaceholder",defaultMessage:"Message"}),value:t,maxLength:200,onChange:this.onMessageChanged}),s));return i.push(o),e&&i.push(r),i.push(a().createElement("div",{key:"autoResponderHint",className:"mt-5"},a().createElement(n.FormattedMessage,{id:"user.settings.notifications.autoResponderHint",defaultMessage:"Set a custom message that will be automatically sent in response to Direct Messages. Mentions in Public and Private Channels will not trigger the automated reply. Enabling Automatic Replies sets your status to Out of Office and disables email and push notifications."}))),a().createElement(p.A,{title:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.autoResponder",defaultMessage:"Automatic direct message replies"}),shiftEnter:!0,submit:this.props.submit,saving:this.props.saving,inputs:i,updateSection:this.props.updateSection})}}var oe=s(21363),re=s(99424);const le={marginTop:20},ce=e=>{let{adminMode:t=!1}=e;const s=(0,n.useIntl)(),[o,r]=(0,i.useState)("idle"),l=(0,i.useRef)(!1),c=(0,i.useRef)(),[d]=(0,re.v)("https://mattermost.com/pl/troubleshoot-notifications"),u=(0,i.useCallback)((()=>{window.open(d)}),[d]),m=(0,i.useCallback)((async()=>{if(l.current)return;l.current=!0;let e=!1;c.current=setTimeout((()=>{e=!0,r("sending")}),500);const t=await(0,oe.yg)();clearTimeout(c.current);const s=()=>{"OK"===t.status?r("sent"):(console.error(t),r("error")),c.current=setTimeout((()=>{l.current=!1,r("idle")}),3e3)};e?c.current=setTimeout(s,500):s()}),[]);(0,i.useEffect)((()=>()=>{clearTimeout(c.current)}),[]);const p=(0,i.useMemo)((()=>{let e,t,i;switch(o){case"idle":e=s.formatMessage({id:"user_settings.notifications.test_notification.send_button.send",defaultMessage:"Send a test notification"});break;case"sending":e=s.formatMessage({id:"user_settings.notifications.test_notification.send_button.sending",defaultMessage:"Sending a test notification"}),i=!0;break;case"sent":e=s.formatMessage({id:"user_settings.notifications.test_notification.send_button.sent",defaultMessage:"Test notification sent"}),t="icon-check";break;case"error":e=s.formatMessage({id:"user_settings.notifications.test_notification.send_button.error",defaultMessage:"Error sending test notification"}),t="icon-alert-outline"}return{onClick:m,text:e,leadingIcon:t,loading:i}}),[o,s,m]),h=(0,i.useMemo)((()=>({onClick:u,text:s.formatMessage({id:"user_settings.notifications.test_notification.go_to_docs",defaultMessage:"Troubleshooting docs"}),trailingIcon:"icon-open-in-new"})),[s,u]);return t?null:a().createElement(a().Fragment,null,a().createElement("div",{className:"divider-light"}),a().createElement("div",{style:le},a().createElement(M.A,{text:s.formatMessage({id:"user_settings.notifications.test_notification.body",defaultMessage:"Not receiving notifications? Start by sending a test notification to all your devices to check if they’re working as expected. If issues persist, explore ways to solve them with troubleshooting steps."}),title:s.formatMessage({id:"user_settings.notifications.test_notification.title",defaultMessage:"Troubleshooting notifications"}),primaryButton:p,tertiaryButton:h,type:"hint"})))};ce.propTypes={adminMode:N().bool};const de=ce;var ue=s(93247),me=s(98113);function pe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function he(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(s),!0).forEach((function(t){fe(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function fe(e,t,s){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ge=/\s+/g,be=/,/g;function Ee(e){let t=f.DB.MENTION,s=f.DB.ALL,i=f.DB.ALL,a=f.DB.ALL,n="true",o="true",r=g.x[0],l="Calm",c="never",d="true",u=f.DB.MENTION,m=f.Ay.UserStatuses.AWAY,p=!1,h=e.intl.formatMessage({id:"user.settings.notifications.autoResponderDefault",defaultMessage:"Hello, I am out of office and unable to respond to messages."}),b=!0;var E,v;e.user.notify_props&&(e.user.notify_props.desktop&&(t=e.user.notify_props.desktop),e.user.notify_props.desktop_threads&&(s=e.user.notify_props.desktop_threads),e.user.notify_props.push_threads&&(i=e.user.notify_props.push_threads),e.user.notify_props.email_threads&&(a=e.user.notify_props.email_threads),e.user.notify_props.desktop_sound&&(n=e.user.notify_props.desktop_sound),e.user.notify_props.calls_desktop_sound&&(o=e.user.notify_props.calls_desktop_sound),e.user.notify_props.desktop_notification_sound&&(r=e.user.notify_props.desktop_notification_sound),e.user.notify_props.calls_notification_sound&&(l=e.user.notify_props.calls_notification_sound),e.user.notify_props.comments&&(c=e.user.notify_props.comments),e.user.notify_props.email&&(d=e.user.notify_props.email),e.user.notify_props.push&&(u=e.user.notify_props.push),e.user.notify_props.push_status&&(m=e.user.notify_props.push_status),e.user.notify_props.auto_responder_active&&(p="true"===e.user.notify_props.auto_responder_active),e.user.notify_props.auto_responder_message&&(h=e.user.notify_props.auto_responder_message),e.user.notify_props.desktop&&e.user.notify_props.push&&(b=function(e,t,s,i,a){return!(e&&t&&s&&i)||(!(Se.includes(e)&&Se.includes(t)&&Se.includes(s)&&Se.includes(i))||(e!==t||!!a&&s!==i))}(e.user.notify_props.desktop,e.user.notify_props.push,null===(E=e.user.notify_props)||void 0===E?void 0:E.desktop_threads,null===(v=e.user.notify_props)||void 0===v?void 0:v.push_threads,e.isCollapsedThreadsEnabled)));let y=!1,M=!1,S=!1,k=!1;const N=[],w=[];if(e.user.notify_props){var A,I,_,C,R,T;if((null===(A=e.user.notify_props)||void 0===A||null===(I=A.mention_keys)||void 0===I?void 0:I.length)>0){const t=e.user.notify_props.mention_keys.split(",").filter((e=>e.length>0));t.forEach((t=>{t!==e.user.username&&t!=="@".concat(e.user.username)&&N.push({label:t,value:t})})),y=t.includes(e.user.username),k=N.length>0}(null===(_=e.user.notify_props)||void 0===_||null===(C=_.highlight_keys)||void 0===C?void 0:C.length)>0&&e.user.notify_props.highlight_keys.split(",").filter((e=>e.length>0)).forEach((e=>{w.push({label:e,value:e})})),M="true"===(null===(R=e.user.notify_props)||void 0===R?void 0:R.first_name),S="true"===(null===(T=e.user.notify_props)||void 0===T?void 0:T.channel)}return{desktopActivity:t,desktopThreads:s,pushThreads:i,emailThreads:a,enableEmail:d,pushActivity:u,pushStatus:m,desktopSound:n,callsDesktopSound:o,desktopNotificationSound:r,callsNotificationSound:l,usernameKey:y,customKeysWithNotification:N,isCustomKeysWithNotificationInputChecked:k,customKeysWithNotificationInputValue:"",customKeysWithHighlight:w,customKeysWithHighlightInputValue:"",firstNameKey:M,channelKey:S,autoResponderActive:p,autoResponderMessage:h,notifyCommentsLevel:c,isSaving:!1,serverError:"",desktopAndMobileSettingsDifferent:b}}const ve=e=>a().createElement(o.c.Input,Object.assign({},e,{"aria-labelledby":"settingTitle"}));class ye extends a().PureComponent{constructor(e){super(e),fe(this,"handleSubmit",(async()=>{var e;const t=he({},this.props.user.notify_props);t.email=this.state.enableEmail,t.desktop_sound=this.state.desktopSound,t.calls_desktop_sound=this.state.callsDesktopSound,t.desktop_notification_sound=this.state.desktopNotificationSound,t.calls_notification_sound=this.state.callsNotificationSound,t.desktop=this.state.desktopActivity,t.desktop_threads=this.state.desktopThreads,t.email_threads=this.state.emailThreads,t.push_status=this.state.pushStatus,t.comments=this.state.notifyCommentsLevel,t.auto_responder_active=this.state.autoResponderActive?"true":"false",t.auto_responder_message=this.state.autoResponderMessage,t.first_name=this.state.firstNameKey?"true":"false",t.channel=this.state.channelKey?"true":"false",this.state.desktopAndMobileSettingsDifferent?(t.push=this.state.pushActivity,t.push_threads=this.state.pushThreads):(t.push=this.state.desktopActivity,t.push_threads=this.state.desktopThreads),t.auto_responder_message&&""!==t.auto_responder_message||(t.auto_responder_message=this.props.intl.formatMessage({id:"user.settings.notifications.autoResponderDefault",defaultMessage:"Hello, I am out of office and unable to respond to messages."}));const s=[];this.state.usernameKey&&s.push(this.props.user.username),this.state.isCustomKeysWithNotificationInputChecked&&this.state.customKeysWithNotification.length>0&&this.state.customKeysWithNotification.forEach((e=>{s.push(e.value)})),t.mention_keys=s.join(",");const i=[];let a,n;if(this.state.customKeysWithHighlight.length>0&&this.state.customKeysWithHighlight.forEach((e=>{i.push(e.value)})),t.highlight_keys=i.join(","),(null===(e=this.props.user.notify_props)||void 0===e?void 0:e.highlight_keys)!==t.highlight_keys&&t.highlight_keys.length>0&&(0,d.AC)(c.tG,c.Hm),this.setState({isSaving:!0}),(0,g.$c)(),this.props.adminMode){const e=he(he({},this.props.user),{},{notify_props:t}),s=await this.props.patchUser(e);a=s.data,n=s.error}else{const e=await this.props.updateMe({notify_props:t});a=e.data,n=e.error}a?(this.handleUpdateSection(""),this.setState(Ee(this.props))):n?this.setState({serverError:n.message,isSaving:!1}):this.setState({serverError:"",isSaving:!1})})),fe(this,"handleCancel",(()=>{this.setState(Ee(this.props)),(0,g.$c)()})),fe(this,"handleUpdateSection",(e=>{e?this.props.updateSection(e):this.props.updateSection(""),this.setState({isSaving:!1}),this.handleCancel()})),fe(this,"setStateValue",((e,t)=>{const s={};s[e]=t,this.setState((e=>he(he({},e),s)))})),fe(this,"handleNotifyCommentsRadio",((e,t)=>{this.setState({notifyCommentsLevel:e}),(0,b.b6)(null==t?void 0:t.currentTarget)})),fe(this,"handleEmailRadio",(e=>{this.setState({enableEmail:e})})),fe(this,"handleChangeForUsernameKeyCheckbox",(e=>{const{target:{checked:t}}=e;this.setState({usernameKey:t})})),fe(this,"handleChangeForFirstNameKeyCheckbox",(e=>{const{target:{checked:t}}=e;this.setState({firstNameKey:t})})),fe(this,"handleChangeForChannelKeyCheckbox",(e=>{const{target:{checked:t}}=e;this.setState({channelKey:t})})),fe(this,"handleChangeForCustomKeysWithNotificationCheckbox",(e=>{const{target:{checked:t}}=e;this.setState({isCustomKeysWithNotificationInputChecked:t})})),fe(this,"handleChangeForCustomKeysWithNotificationInput",(e=>{if(e&&Array.isArray(e)&&e.length>0){!1===this.state.isCustomKeysWithNotificationInputChecked&&this.setState({isCustomKeysWithNotificationInputChecked:!0});const t=e.map((e=>{const t=e.value.trim().replace(ge,"");return{value:t,label:t}})).filter((e=>e.value.length>0));this.setState({customKeysWithNotification:t})}else this.setState({isCustomKeysWithNotificationInputChecked:!1,customKeysWithNotification:[]})})),fe(this,"updateCustomKeysWithNotificationWithInputValue",(e=>{const t=[...this.state.customKeysWithNotification,{value:e,label:e}];this.setState({customKeysWithNotification:t,customKeysWithNotificationInputValue:""}),this.state.isCustomKeysWithNotificationInputChecked||this.setState({isCustomKeysWithNotificationInputChecked:!0})})),fe(this,"handleOnKeydownForCustomKeysWithNotificationInput",(e=>{if(e.key===f.Ay.KeyCodes.COMMA[0]||e.key===f.Ay.KeyCodes.TAB[0]){var t,s,i,a;const e=null!==(t=null===(s=this.state.customKeysWithNotificationInputValue)||void 0===s||null===(i=s.trim())||void 0===i||null===(a=i.replace(ge,""))||void 0===a?void 0:a.replace(be,""))&&void 0!==t?t:"";e.length>0&&this.updateCustomKeysWithNotificationWithInputValue(e)}})),fe(this,"handleChangeForCustomKeysWithNotificationInputValue",(e=>{if(!e.includes(f.Ay.KeyCodes.COMMA[0])){const t=e.trim().replace(ge,"");this.setState({customKeysWithNotificationInputValue:t})}})),fe(this,"handleBlurForCustomKeysWithNotificationInput",(()=>{var e,t,s,i;const a=null!==(e=null===(t=this.state.customKeysWithNotificationInputValue)||void 0===t||null===(s=t.trim())||void 0===s||null===(i=s.replace(ge,""))||void 0===i?void 0:i.replace(be,""))&&void 0!==e?e:"";a.length>0&&this.updateCustomKeysWithNotificationWithInputValue(a)})),fe(this,"handleChangeForCustomKeysWithHighlightInput",(e=>{if(e&&Array.isArray(e)&&e.length>0){const t=e.map((e=>{const t=e.value.trim();return{value:t,label:t}})).filter((e=>e.value.length>0));this.setState({customKeysWithHighlight:t})}else this.setState({customKeysWithHighlight:[]})})),fe(this,"handleChangeForCustomKeysWithHighlightInputValue",(e=>{e.includes(f.Ay.KeyCodes.COMMA[0])||this.setState({customKeysWithHighlightInputValue:e})})),fe(this,"updateCustomKeysWithHighlightWithInputValue",(e=>{var t,s;const i=null!==(t=null==e||null===(s=e.trim())||void 0===s?void 0:s.replace(be,""))&&void 0!==t?t:"";if(i.length>0){const e=[...this.state.customKeysWithHighlight,{value:i,label:i}];this.setState({customKeysWithHighlight:e,customKeysWithHighlightInputValue:""})}})),fe(this,"handleBlurForCustomKeysWithHighlightInput",(()=>{this.updateCustomKeysWithHighlightWithInputValue(this.state.customKeysWithHighlightInputValue)})),fe(this,"handleOnKeydownForCustomKeysWithHighlightInput",(e=>{e.key!==f.Ay.KeyCodes.COMMA[0]&&e.key!==f.Ay.KeyCodes.TAB[0]||this.updateCustomKeysWithHighlightWithInputValue(this.state.customKeysWithHighlightInputValue)})),fe(this,"handleCloseSettingsModal",(()=>{this.props.closeModal()})),fe(this,"createKeywordsWithNotificationSection",(()=>{const e=this.state.serverError,t=this.props.user,s=this.props.activeSection===f.Y$.KEYWORDS_MENTIONS;let i=null;if(s){const s=[];t.first_name&&s.push(a().createElement("div",{key:"userNotificationFirstNameOption"},a().createElement("div",{className:"checkbox"},a().createElement("label",null,a().createElement("input",{id:"notificationTriggerFirst",type:"checkbox",checked:this.state.firstNameKey,onChange:this.handleChangeForFirstNameKeyCheckbox}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.sensitiveName",defaultMessage:'Your case-sensitive first name "{first_name}"',values:{first_name:t.first_name}}))))),s.push(a().createElement("div",{key:"userNotificationUsernameOption"},a().createElement("div",{className:"checkbox"},a().createElement("label",null,a().createElement("input",{id:"notificationTriggerUsername",type:"checkbox",checked:this.state.usernameKey,onChange:this.handleChangeForUsernameKeyCheckbox}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.sensitiveUsername",defaultMessage:'Your non case-sensitive username "{username}"',values:{username:t.username}}))))),s.push(a().createElement("div",{key:"userNotificationChannelOption"},a().createElement("div",{className:"checkbox"},a().createElement("label",null,a().createElement("input",{id:"notificationTriggerShouts",type:"checkbox",checked:this.state.channelKey,onChange:this.handleChangeForChannelKeyCheckbox}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.channelWide",defaultMessage:'Channel-wide mentions "@channel", "@all", "@here"'}))))),s.push(a().createElement("div",{key:"userNotificationCustomOption",className:"customKeywordsWithNotificationSubsection"},a().createElement("div",{className:"checkbox"},a().createElement("label",null,a().createElement("input",{id:"notificationTriggerCustom",type:"checkbox",checked:this.state.isCustomKeysWithNotificationInputChecked,onChange:this.handleChangeForCustomKeysWithNotificationCheckbox}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.sensitiveCustomWords",defaultMessage:"Other non case-sensitive words, press Tab or use commas to separate keywords:"}))),a().createElement(r.A,{inputId:"notificationTriggerCustomText",autoFocus:!0,isClearable:!1,isMulti:!0,styles:Me,placeholder:"",components:{DropdownIndicator:()=>null,Menu:()=>null,MenuList:()=>null,Input:ve},onChange:this.handleChangeForCustomKeysWithNotificationInput,value:this.state.customKeysWithNotification,inputValue:this.state.customKeysWithNotificationInputValue,onInputChange:this.handleChangeForCustomKeysWithNotificationInputValue,onBlur:this.handleBlurForCustomKeysWithNotificationInput,onKeyDown:this.handleOnKeydownForCustomKeysWithNotificationInput})));const o=a().createElement(n.FormattedMessage,{id:"user.settings.notifications.keywordsWithNotification.extraInfo",defaultMessage:'Notifications are triggered when someone sends a message that includes your username ("@{username}") or any of the options selected above.',values:{username:t.username}});i=a().createElement(p.A,{title:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithNotification.title",defaultMessage:"Keywords that trigger notifications"}),inputs:a().createElement("fieldset",null,a().createElement("legend",{className:"hidden-label"},this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithNotification.title",defaultMessage:"Keywords that trigger notifications"})),a().createElement("div",null,s)),submit:this.handleSubmit,saving:this.state.isSaving,serverError:e,extraInfo:o,updateSection:this.handleUpdateSection})}const o=["@"+t.username];if(this.state.firstNameKey&&o.push(t.first_name),this.state.usernameKey&&o.push(t.username),this.state.channelKey&&(o.push("@channel"),o.push("@all"),o.push("@here")),this.state.customKeysWithNotification.length>0){const e=this.state.customKeysWithNotification.map((e=>e.value));o.push(...e)}const l=o.filter((e=>0!==e.trim().length)).map((e=>'"'.concat(e,'"'))).join(", ");return a().createElement(m.A,{title:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithNotification.title",defaultMessage:"Keywords that trigger notifications"}),section:f.Y$.KEYWORDS_MENTIONS,active:s,areAllSectionsInactive:""===this.props.activeSection,describe:l,updateSection:this.handleUpdateSection,max:i})})),fe(this,"createKeywordsWithHighlightSection",(()=>{const e=this.props.activeSection===f.Y$.KEYWORDS_HIGHLIGHT;let t=null;if(e){const e=[a().createElement("div",{key:"userNotificationHighlightOption",className:"customKeywordsWithNotificationSubsection"},a().createElement("label",{htmlFor:"mentionKeysWithHighlightInput"},a().createElement(n.FormattedMessage,{id:"user.settings.notifications.keywordsWithHighlight.inputTitle",defaultMessage:"Enter non case-sensitive keywords, press Tab or use commas to separate them:"})),a().createElement(r.A,{inputId:"mentionKeysWithHighlightInput",autoFocus:!0,isClearable:!1,isMulti:!0,styles:Me,placeholder:"",components:{DropdownIndicator:()=>null,Menu:()=>null,MenuList:()=>null},"aria-labelledby":"mentionKeysWithHighlightInput",onChange:this.handleChangeForCustomKeysWithHighlightInput,value:this.state.customKeysWithHighlight,inputValue:this.state.customKeysWithHighlightInputValue,onInputChange:this.handleChangeForCustomKeysWithHighlightInputValue,onBlur:this.handleBlurForCustomKeysWithHighlightInput,onKeyDown:this.handleOnKeydownForCustomKeysWithHighlightInput}))],s=a().createElement(n.FormattedMessage,{id:"user.settings.notifications.keywordsWithHighlight.extraInfo",defaultMessage:"These keywords will be shown to you with a highlight when anyone sends a message that includes them."});t=a().createElement(p.A,{title:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithHighlight.title",defaultMessage:"Keywords that get highlighted (without notifications)"}),inputs:e,submit:this.handleSubmit,saving:this.state.isSaving,serverError:this.state.serverError,extraInfo:s,updateSection:this.handleUpdateSection})}let s=this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithHighlight.none",defaultMessage:"None"});!this.props.isEnterpriseOrCloudOrSKUStarterFree&&this.props.isEnterpriseReady&&this.state.customKeysWithHighlight.length>0&&(s=this.state.customKeysWithHighlight.map((e=>e.value)).map((e=>'"'.concat(e,'"'))).join(", "));const i=a().createElement(h.A,{blocked:this.props.isEnterpriseOrCloudOrSKUStarterFree&&this.props.isEnterpriseReady,feature:f.W0.HIGHLIGHT_WITHOUT_NOTIFICATION,minimumPlanRequiredForFeature:f.gS.Professional,tooltipTitle:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithHighlight.disabledTooltipTitle",defaultMessage:"Professional feature"}),tooltipMessageBlocked:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithHighlight.disabledTooltipMessage",defaultMessage:"This feature is available on the Professional plan"}),titleAdminPreTrial:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithHighlight.userModal.titleAdminPreTrial",defaultMessage:"Highlight keywords without notifications with Mattermost Professional"}),messageAdminPreTrial:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithHighlight.userModal.messageAdminPreTrial",defaultMessage:"Get the ability to passively highlight keywords that you care about. Upgrade to Professional plan to unlock this feature."}),titleAdminPostTrial:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithHighlight.userModal.titleAdminPostTrial",defaultMessage:"Highlight keywords without notifications with Mattermost Professional"}),messageAdminPostTrial:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithHighlight.userModal.messageAdminPostTrial",defaultMessage:"Get the ability to passively highlight keywords that you care about. Upgrade to Professional plan to unlock this feature."}),titleEndUser:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithHighlight.userModal.titleEndUser",defaultMessage:"Highlight keywords without notifications with Mattermost Professional"}),messageEndUser:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithHighlight.userModal.messageEndUser",defaultMessage:"Get the ability to passively highlight keywords that you care about.{br}{br}Request your admin to upgrade to Mattermost Professional to access this feature."},{br:a().createElement("br",null)}),ctaExtraContent:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.keywordsWithHighlight.professional",defaultMessage:"Professional"}),clickCallback:this.handleCloseSettingsModal});return a().createElement(m.A,{title:this.props.intl.formatMessage({id:"user.settings.notifications.keywordsWithHighlight.title",defaultMessage:"Keywords that get highlighted (without notifications)"}),section:f.Y$.KEYWORDS_HIGHLIGHT,active:e,areAllSectionsInactive:""===this.props.activeSection,describe:s,updateSection:this.handleUpdateSection,max:t,isDisabled:this.props.isEnterpriseOrCloudOrSKUStarterFree&&this.props.isEnterpriseReady,collapsedEditButtonWhenDisabled:i})})),fe(this,"createCommentsSection",(()=>{const e=this.state.serverError;let t,s=null;if(this.props.activeSection===f.Y$.REPLY_NOTIFCATIONS){const t=[!1,!1,!1];"never"===this.state.notifyCommentsLevel?t[2]=!0:"root"===this.state.notifyCommentsLevel?t[1]=!0:t[0]=!0;const i=[];i.push(a().createElement("fieldset",{key:"userNotificationLevelOption"},a().createElement("legend",{className:"form-legend hidden-label"},a().createElement(n.FormattedMessage,{id:"user.settings.notifications.comments",defaultMessage:"Reply notifications"})),a().createElement("div",{className:"radio"},a().createElement("label",null,a().createElement("input",{id:"notificationCommentsAny",type:"radio",name:"commentsNotificationLevel",checked:t[0],onChange:this.handleNotifyCommentsRadio.bind(this,"any")}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.commentsAny",defaultMessage:"Trigger notifications on messages in reply threads that I start or participate in"})),a().createElement("br",null)),a().createElement("div",{className:"radio"},a().createElement("label",null,a().createElement("input",{id:"notificationCommentsRoot",type:"radio",name:"commentsNotificationLevel",checked:t[1],onChange:this.handleNotifyCommentsRadio.bind(this,"root")}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.commentsRoot",defaultMessage:"Trigger notifications on messages in threads that I start"})),a().createElement("br",null)),a().createElement("div",{className:"radio"},a().createElement("label",null,a().createElement("input",{id:"notificationCommentsNever",type:"radio",name:"commentsNotificationLevel",checked:t[2],onChange:this.handleNotifyCommentsRadio.bind(this,"never")}),a().createElement(n.FormattedMessage,{id:"user.settings.notifications.commentsNever",defaultMessage:"Do not trigger notifications on messages in reply threads unless I'm mentioned"})))));const o=a().createElement("span",null,a().createElement(n.FormattedMessage,{id:"user.settings.notifications.commentsInfo",defaultMessage:"In addition to notifications for when you're mentioned, select if you would like to receive notifications on reply threads."}));s=a().createElement(p.A,{title:this.props.intl.formatMessage({id:"user.settings.notifications.comments",defaultMessage:"Reply notifications"}),extraInfo:o,inputs:i,submit:this.handleSubmit,saving:this.state.isSaving,serverError:e,updateSection:this.handleUpdateSection})}return t="never"===this.state.notifyCommentsLevel?a().createElement(n.FormattedMessage,{id:"user.settings.notifications.commentsNever",defaultMessage:"Do not trigger notifications on messages in reply threads unless I'm mentioned"}):"root"===this.state.notifyCommentsLevel?a().createElement(n.FormattedMessage,{id:"user.settings.notifications.commentsRoot",defaultMessage:"Trigger notifications on messages in threads that I start"}):a().createElement(n.FormattedMessage,{id:"user.settings.notifications.commentsAny",defaultMessage:"Trigger notifications on messages in reply threads that I start or participate in"}),a().createElement(m.A,{title:this.props.intl.formatMessage({id:"user.settings.notifications.comments",defaultMessage:"Reply notifications"}),active:this.props.activeSection===f.Y$.REPLY_NOTIFCATIONS,describe:t,section:f.Y$.REPLY_NOTIFCATIONS,updateSection:this.handleUpdateSection,max:s,areAllSectionsInactive:""===this.props.activeSection})})),fe(this,"createAutoResponderSection",(()=>{const e=this.state.autoResponderActive?a().createElement(n.FormattedMessage,{id:"user.settings.notifications.autoResponderEnabled",defaultMessage:"Enabled"}):a().createElement(n.FormattedMessage,{id:"user.settings.notifications.autoResponderDisabled",defaultMessage:"Disabled"});return a().createElement(m.A,{active:this.props.activeSection===f.Y$.AUTO_RESPONDER,areAllSectionsInactive:""===this.props.activeSection,title:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.autoResponder",defaultMessage:"Automatic direct message replies"}),describe:e,section:f.Y$.AUTO_RESPONDER,updateSection:this.handleUpdateSection,max:a().createElement("div",null,a().createElement(ne,{autoResponderActive:this.state.autoResponderActive,autoResponderMessage:this.state.autoResponderMessage||"",updateSection:this.handleUpdateSection,setParentState:this.setStateValue,submit:this.handleSubmit,error:this.state.serverError,saving:this.state.isSaving}),a().createElement("div",{className:"divider-dark"}))})})),this.state=Ee(e)}render(){const e=this.createKeywordsWithNotificationSection(),t=this.createKeywordsWithHighlightSection(),s=this.createCommentsSection(),i=this.createAutoResponderSection(),o=""===this.props.activeSection;return a().createElement("div",{id:"notificationsSettings","aria-labelledby":"notificationsButton",role:"tabpanel"},a().createElement(me.A,{closeModal:this.props.closeModal,collapseModal:this.props.collapseModal,text:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.title",defaultMessage:"Notification settings"})}),a().createElement("div",{className:"user-settings"},a().createElement(ue.A,{id:"notificationSettingsTitle",text:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.header",defaultMessage:"Notifications"}),info:a().createElement(n.FormattedMessage,{id:"user.settings.notifications.learnMore",defaultMessage:"<a>Learn more about notifications</a>",values:{a:e=>a().createElement(u.A,{location:"user_settings_notifications",href:"https://mattermost.com/pl/about-notifications",className:"btn btn-link"},a().createElement(l.LightbulbOutlineIcon,{className:"circular-border"}),a().createElement("span",null,e))}})}),a().createElement("div",{className:"divider-dark first"}),a().createElement(B,{active:this.props.activeSection===f.Y$.DESKTOP_AND_MOBILE,updateSection:this.handleUpdateSection,onSubmit:this.handleSubmit,onCancel:this.handleCancel,saving:this.state.isSaving,error:this.state.serverError,setParentState:this.setStateValue,areAllSectionsInactive:o,isCollapsedThreadsEnabled:this.props.isCollapsedThreadsEnabled,desktopActivity:this.state.desktopActivity,pushActivity:this.state.pushActivity,sendPushNotifications:this.props.sendPushNotifications,pushStatus:this.state.pushStatus,desktopThreads:this.state.desktopThreads,pushThreads:this.state.pushThreads,desktopAndMobileSettingsDifferent:this.state.desktopAndMobileSettingsDifferent}),a().createElement("div",{className:"divider-light"}),a().createElement(j,{active:this.props.activeSection===f.Y$.DESKTOP_NOTIFICATION_SOUND,updateSection:this.handleUpdateSection,onSubmit:this.handleSubmit,onCancel:this.handleCancel,saving:this.state.isSaving,error:this.state.serverError,setParentState:this.setStateValue,areAllSectionsInactive:o,desktopSound:this.state.desktopSound,desktopNotificationSound:this.state.desktopNotificationSound,isCallsRingingEnabled:this.props.isCallsRingingEnabled,callsDesktopSound:this.state.callsDesktopSound,callsNotificationSound:this.state.callsNotificationSound}),a().createElement("div",{className:"divider-light"}),a().createElement(se,{active:this.props.activeSection===f.Y$.EMAIL,updateSection:this.handleUpdateSection,onSubmit:this.handleSubmit,onCancel:this.handleCancel,saving:this.state.isSaving,error:this.state.serverError,setParentState:this.setStateValue,areAllSectionsInactive:o,isCollapsedThreadsEnabled:this.props.isCollapsedThreadsEnabled,enableEmail:"true"===this.state.enableEmail,onChange:this.handleEmailRadio,threads:this.state.emailThreads||""}),a().createElement("div",{className:"divider-light"}),e,!this.props.isEnterpriseOrCloudOrSKUStarterFree&&this.props.isEnterpriseReady&&a().createElement(a().Fragment,null,a().createElement("div",{className:"divider-light"}),t),a().createElement("div",{className:"divider-light"}),!this.props.isCollapsedThreadsEnabled&&a().createElement(a().Fragment,null,a().createElement("div",{className:"divider-light"}),s),this.props.enableAutoResponder&&a().createElement(a().Fragment,null,a().createElement("div",{className:"divider-light"}),i),this.props.isEnterpriseOrCloudOrSKUStarterFree&&this.props.isEnterpriseReady&&a().createElement(a().Fragment,null,a().createElement("div",{className:"divider-light"}),t),a().createElement(de,{adminMode:this.props.adminMode})))}}fe(ye,"defaultProps",{activeSection:""});const Me={container:e=>he(he({},e),{},{marginBlockStart:"10px"}),control:e=>he(he({},e),{},{backgroundColor:"var(--center-channel-bg)",border:"1px solid rgba(var(--center-channel-color-rgb), 0.16);",":hover":{borderColor:"rgba(var(--center-channel-color-rgb), 0.48);"}}),multiValue:e=>he(he({},e),{},{background:"rgba(var(--center-channel-color-rgb), 0.08)"}),multiValueLabel:e=>he(he({},e),{},{color:"var(--center-channel-color);"}),input:e=>he(he({},e),{},{color:"var(--center-channel-color)"}),indicatorSeparator:e=>he(he({},e),{},{display:"none"}),multiValueRemove:e=>he(he({},e),{},{cursor:"pointer",color:"rgba(var(--center-channel-color-rgb),0.32);",":hover":{backgroundColor:"rgba(var(--center-channel-color-rgb), 0.16)",color:"rgba(var(--center-channel-color-rgb), 0.56);"}})},Se=Object.values(f.DB),ke=(0,n.injectIntl)(ye)},12026:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(97023),a=s.n(i),n=s(14778);function o(){const{formatMessage:e}=(0,n.useIntl)();return a().createElement("i",{className:"icon-pencil-outline","aria-hidden":"true",title:e({id:"generic_icons.edit",defaultMessage:"Edit Icon"})})}},87064:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(62688),a=s.n(i),n=s(71633),o=s.n(n),r=s(97023),l=s.n(r),c=s(14778);const d=e=>{let{additionalClassName:t}=e;const{formatMessage:s}=(0,c.useIntl)();return l().createElement("i",{className:o()("fa fa-warning",t),title:s({id:"generic_icons.warning",defaultMessage:"Warning Icon"})})};d.propTypes={additionalClassName:a().string};const u=l().memo(d)},8589:(e,t,s)=>{s.d(t,{A:()=>m});var i=s(62688),a=s.n(i),n=(s(4290),s(17046),s(71633)),o=s.n(n),r=s(97023),l=s.n(r),c=s(14778),d=s(85406);function u(e){let{title:t,description:s,content:i,className:a,error:n,descriptionAboveContent:r=!1,isContentInline:u=!1,dataTestId:m}=e;const{formatMessage:p}=(0,c.useIntl)(),h=t&&l().createElement("h4",{"data-testid":"mm-modal-generic-section-item__title",className:"mm-modal-generic-section-item__title"},t),f=s&&l().createElement("p",{"data-testid":"mm-modal-generic-section-item__description",className:"mm-modal-generic-section-item__description"},s),g=n&&l().createElement("div",{"data-testid":"mm-modal-generic-section-item__error",className:"mm-modal-generic-section-item__error"},l().createElement(d.AlertCircleOutlineIcon,null),p({id:n.id,defaultMessage:n.defaultMessage},n.values));return l().createElement("div",{"data-testid":m,className:o()("mm-modal-generic-section-item",a)},h,r?f:void 0,l().createElement("div",{"data-testid":"mm-modal-generic-section-item__content",className:o()("mm-modal-generic-section-item__content",{inline:u})},i),r?void 0:f,g)}u.propTypes={title:a().string,description:a().string,dataTestId:a().string,content:a().element.isRequired,isContentInline:a().bool,className:a().string,descriptionAboveContent:a().bool};const m=u},63867:(e,t,s)=>{s.d(t,{O:()=>o});var i=s(62688),a=s.n(i),n=(s(4290),s(97023),s(14778),s(46005),s(45036));s(8589);const o=(e,t)=>(0,n.H6)(t.formatMessage,e.label)||"";a().shape({id:a().string.isRequired,name:a().string,inputId:a().string,dataTestId:a().string,ariaLabelledby:a().string,clearable:a().bool,options:a().arrayOf(a().shape({value:a().string.isRequired})).isRequired}).isRequired,a().shape({value:a().string.isRequired}).isRequired,a().func.isRequired},79135:(e,t,s)=>{s.d(t,{b:()=>l,s:()=>r}),s(3188),s(6552);var i=s(97023),a=s.n(i),n=s(14778),o=s(78451);function r(e,t,s){let i=l.passwordError.id;const r=[];let c=!0;const d=t.minimumLength||o.Ay.MIN_PASSWORD_LENGTH;let u;return(e.length<d||e.length>o.Ay.MAX_PASSWORD_LENGTH)&&(c=!1,r.push({field:"password",rule:"error_length"})),t.requireLowercase&&(e.match(/[a-z]/)||(c=!1),i+="Lowercase",r.push({field:"password",rule:"lowercase"})),t.requireUppercase&&(e.match(/[A-Z]/)||(c=!1),i+="Uppercase",r.push({field:"password",rule:"uppercase"})),t.requireNumber&&(e.match(/[0-9]/)||(c=!1),i+="Number",r.push({field:"password",rule:"number"})),t.requireSymbol&&(e.match(/[ !"\\#$%&'()*+,-./:;<=>?@[\]^_`|~]/)||(c=!1),i+="Symbol",r.push({field:"password",rule:"symbol"})),c||(u=s?s.formatMessage({id:i,defaultMessage:"Must be {min}-{max} characters long."},{min:d,max:o.Ay.MAX_PASSWORD_LENGTH}):a().createElement(n.FormattedMessage,{id:i,defaultMessage:"Must be {min}-{max} characters long.",values:{min:d,max:o.Ay.MAX_PASSWORD_LENGTH}})),{valid:c,error:u,telemetryErrorIds:r}}const l=(0,n.defineMessages)({passwordError:{id:"user.settings.security.passwordError",defaultMessage:"Your password must be {min}-{max} characters long."},passwordErrorLowercase:{id:"user.settings.security.passwordErrorLowercase",defaultMessage:"Your password must be {min}-{max} characters long and include lowercase letters."},passwordErrorLowercaseNumber:{id:"user.settings.security.passwordErrorLowercaseNumber",defaultMessage:"Your password must be {min}-{max} characters long and include lowercase letters and numbers."},passwordErrorLowercaseNumberSymbol:{id:"user.settings.security.passwordErrorLowercaseNumberSymbol",defaultMessage:"Your password must be {min}-{max} characters long and include lowercase letters, numbers, and special characters."},passwordErrorLowercaseSymbol:{id:"user.settings.security.passwordErrorLowercaseSymbol",defaultMessage:"Your password must be {min}-{max} characters long and include lowercase letters and special characters."},passwordErrorLowercaseUppercase:{id:"user.settings.security.passwordErrorLowercaseUppercase",defaultMessage:"Your password must be {min}-{max} characters long and include both lowercase and uppercase letters."},passwordErrorLowercaseUppercaseNumber:{id:"user.settings.security.passwordErrorLowercaseUppercaseNumber",defaultMessage:"Your password must be {min}-{max} characters long and include both lowercase and uppercase letters, and numbers."},passwordErrorLowercaseUppercaseNumberSymbol:{id:"user.settings.security.passwordErrorLowercaseUppercaseNumberSymbol",defaultMessage:"Your password must be {min}-{max} characters long and include both lowercase and uppercase letters, numbers, and special characters."},passwordErrorLowercaseUppercaseSymbol:{id:"user.settings.security.passwordErrorLowercaseUppercaseSymbol",defaultMessage:"Your password must be {min}-{max} characters long and include both lowercase and uppercase letters, and special characters."},passwordErrorNumber:{id:"user.settings.security.passwordErrorNumber",defaultMessage:"Your password must be {min}-{max} characters long and include numbers."},passwordErrorNumberSymbol:{id:"user.settings.security.passwordErrorNumberSymbol",defaultMessage:"Your password must be {min}-{max} characters long and include numbers and special characters."},passwordErrorSymbol:{id:"user.settings.security.passwordErrorSymbol",defaultMessage:"Your password must be {min}-{max} characters long and include special characters."},passwordErrorUppercase:{id:"user.settings.security.passwordErrorUppercase",defaultMessage:"Your password must be {min}-{max} characters long and include uppercase letters."},passwordErrorUppercaseNumber:{id:"user.settings.security.passwordErrorUppercaseNumber",defaultMessage:"Your password must be {min}-{max} characters long and include uppercase letters, and numbers."},passwordErrorUppercaseNumberSymbol:{id:"user.settings.security.passwordErrorUppercaseNumberSymbol",defaultMessage:"Your password must be {min}-{max} characters long and include uppercase letters, numbers, and special characters."},passwordErrorUppercaseSymbol:{id:"user.settings.security.passwordErrorUppercaseSymbol",defaultMessage:"Your password must be {min}-{max} characters long and include uppercase letters, and special characters."}})}}]);
//# sourceMappingURL=4292.acb4facfc5623da1109a.js.map