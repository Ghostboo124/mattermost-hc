"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[1517],{65231:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y}),a(17046),a(43813);var n=a(97023),o=a.n(n),r=a(14778),i=a(23453),l=a(44785),s=a.n(l),c=a(85406),d=a(97282),m=a(35631),p=a(45955),u=a(26614),g=a(77440),f=a(7430),b=a(59671),h=a(51140),x=a(65664),k=a(71861),y=a(53791),v=a(85760),E=a(78451);const _="md",S={xs:10,sm:12,md:16,lg:20,xl:32};var w=a(49673),N=a(72562);const O=s()(w.Ay).withConfig({shouldForwardProp:(e,t)=>N.Aq.forceForwardProperty(e,["glyph","size"])||N.Aq.blockProperty(e)&&t(e)})((({theme:e,status:t})=>l.css`
        color: ${e.badges[t]};
    `));const A=e=>{var{status:t,size:a=_}=e,n=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a}(e,["status","size"]);let r="circle-outline";switch(t){case"away":r="clock";break;case"dnd":r="minus-circle";break;case"online":r="check-circle"}const i=Object.assign({status:t,glyph:r,size:S[a]},n);return o().createElement(O,Object.assign({},i))},T=s().div.withConfig({displayName:"Animation"})(["position:absolute;z-index:30;flex-direction:column;left:15px;bottom:0;display:none;&.completed{display:flex;}&:before{content:'';background-color:var(--online-indicator);opacity:0;border-radius:50%;width:1rem;bottom:15%;position:absolute;height:1rem;margin-left:auto;margin-right:auto;left:0;right:0;}.x1{opacity:0;animation-delay:150ms;}.x2{transform:scale(0.6);margin-left:6px;animation-delay:250ms;opacity:0;}.x3{transform:scale(0.6);margin-left:-6px;animation-delay:300ms;opacity:0;}.x4{transform:scale(0.2);opacity:0;}&.completed{&:before{animation:opacity 800ms ease-in-out,scale 800ms linear;}.x1,.x2,.x3,.x4{animation:opacity 900ms ease-in-out,moveUp 900ms linear;}}@keyframes moveUp{0%{top:0;}100%{top:-50px;}}@keyframes opacity{0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}}@keyframes scale{0%{transform:scale(0);}50%{transform:scale(2);}100%{transform:scale(4);}}"]),C=e=>o().createElement(T,{className:e.completed?"completed":""},o().createElement(A,{status:"online",className:"x1"}),o().createElement(A,{status:"online",className:"x2"}),o().createElement(A,{status:"online",className:"x3"}),o().createElement(A,{status:"online",className:"x4"}));var I=a(62688),M=a.n(I),F=a(83083),R=a(17518),z=a(12895);const L=a.p+"files/2a8c0b1b24fe26f9bfcf.svg",P=s().div.withConfig({displayName:"CompletedWrapper"})(['display:flex;flex-direction:column;align-items:center;padding:26px 24px 0 24px;margin:auto;text-align:center;word-break:break-word;width:100%;height:500px;&.fade-enter{transform:scale(0);}&.fade-enter-active{transform:scale(1);}&.fade-enter-done{transform:scale(1);}&.fade-exit{transform:scale(1);}&.fade-exit-active{transform:scale(1);}&.fade-exit-done{transform:scale(1);}.start-trial-btn,.got-it-button{padding:13px 20px;background:var(--button-bg);border-radius:4px;color:var(--sidebar-text);border:none;font-weight:bold;margin-top:15px;min-height:40px;&:hover{background:var(--button-bg) !important;color:var(--sidebar-text) !important;}}h2{font-size:20px;margin:0 0 10px;font-weight:600;}.start-trial-text,.completed-subtitle{font-size:14px !important;color:rgba(var(--center-channel-color-rgb),0.75);line-height:20px;}.completed-subtitle{margin-top:5px;}.disclaimer,.download-apps{width:90%;margin-top:15px;color:rgba(var(--center-channel-color-rgb),0.75);font-family:"Open Sans";font-style:normal;font-weight:normal;line-height:16px;}.disclaimer{text-align:left;margin-top:auto;font-size:11px;}.download-apps{margin-top:24px;width:200px;font-size:12px;}.style-link{border:none;background:none !important;color:var(--button-bg) !important;}.no-thanks-link{display:inline-block;min-width:fit-content;margin-top:18px;font-weight:600;font-size:14px;line-height:20px;&:hover{text-decoration:underline;}}']),D=e=>{const{dismissAction:t}=e,a=(0,i.useDispatch)();(0,n.useEffect)((()=>{a((0,d.fr)())}),[]);const l=(0,i.useSelector)((e=>e.entities.admin.prevTrialLicense)),s=(0,i.useSelector)(u.Ay),c=null==l?void 0:l.IsLicensed,m=null==s?void 0:s.IsLicensed,p="true"===(null==s?void 0:s.Cloud),g="false"===m&&"false"===c&&(e.isCurrentUserSystemAdmin||e.isFirstAdmin)&&!p;return o().createElement(o().Fragment,null,o().createElement(F.A,{in:!0,timeout:150,classNames:"fade"},o().createElement(P,null,o().createElement("img",{src:L,alt:"completed tasks image"}),o().createElement("h2",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.completed_title",defaultMessage:"Well done. You’ve completed all of the tasks!"})),o().createElement("span",{className:"completed-subtitle"},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.completed_subtitle",defaultMessage:"We hope Mattermost is more familiar now."})),g?o().createElement(o().Fragment,null,o().createElement("span",{className:"start-trial-text"},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.higher_security_features",defaultMessage:"Interested in our higher-security features?"})," ",o().createElement("br",null),o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.start_enterprise_now",defaultMessage:"Start your free Enterprise trial now!"})),o().createElement(z.A,{telemetryId:"start_trial_from_onboarding_completed_task",onClick:t}),o().createElement("button",{onClick:t,className:"no-thanks-link style-link"},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.no_thanks",defaultMessage:"No, thanks"}))):o().createElement("button",{onClick:t,className:"got-it-button"},o().createElement(r.FormattedMessage,{id:"collapsed_reply_threads_modal.confirm",defaultMessage:"Got it"})),o().createElement("div",{className:"download-apps"},o().createElement("span",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.downloads",defaultMessage:"Now that you’re all set up, <link>download our apps.</link>!",values:{link:e=>o().createElement(R.A,{location:"onboarding_tasklist_completed",href:"https://mattermost.com/download#desktop"},e)}}))),g&&o().createElement("div",{className:"disclaimer"},o().createElement("span",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.disclaimer",defaultMessage:"By clicking “Start trial”, I agree to the <linkEvaluation>Mattermost Software and Services License Agreement</linkEvaluation>, <linkPrivacy>privacy policy</linkPrivacy> and receiving product emails.",values:{linkEvaluation:e=>o().createElement(R.A,{href:E.vx.SOFTWARE_SERVICES_LICENSE_AGREEMENT,location:"onboarding_tasklist_completed"},e),linkPrivacy:e=>o().createElement(R.A,{href:E.L0.PRIVACY_POLICY,location:"onboarding_tasklist_completed"},e)}}))))))};D.propTypes={dismissAction:M().func.isRequired,isCurrentUserSystemAdmin:M().bool.isRequired,isFirstAdmin:M().bool.isRequired};const V=D;var X=a(18955),B=a(94621),G=a(38889);const q=s().div.withConfig({displayName:"Overlay"})(["background-color:rgba(0,0,0,0.5);display:flex;align-items:flex-end;justify-content:center;height:100%;min-height:100%;left:0;right:0;top:0;position:fixed;overflow:auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;pointer-events:auto;-ms-scroll-chaining:none;transition:150ms;transition-property:background-color;transition-timing-function:ease-in-out;z-index:100;&.fade-enter{background-color:rgba(0,0,0,0);}&.fade-enter-active{background-color:rgba(0,0,0,0.5);}&.fade-enter-done{background-color:rgba(0,0,0,0.5);}&.fade-exit{background-color:rgba(0,0,0,0.5);}&.fade-exit-active{background-color:rgba(0,0,0,0);}&.fade-exit-done{background-color:rgba(0,0,0,0);}"]),j=e=>{let{trigger:t,placement:a="top-start",isVisible:r,offset:i=[0,5],children:l,onClick:s}=e;const{x:c,y:d,strategy:m,refs:{setReference:p,setFloating:u}}=(0,B.we)({placement:a,middleware:[(0,B.cY)({mainAxis:i[1],crossAxis:i[0]})],whileElementsMounted:G.ll});(0,n.useLayoutEffect)((()=>{p(t)}),[p,t]);const g={container:{position:m,top:null!=d?d:0,left:null!=c?c:0,zIndex:r?100:-1}};return o().createElement(X.XF,{id:E.Bj},o().createElement(F.A,{timeout:150,classNames:"fade",in:r,unmountOnExit:!0},o().createElement(q,{onClick:s,"data-cy":"onboarding-task-list-overlay"})),o().createElement("div",{ref:u,style:g.container},l))};j.propTypes={isVisible:M().bool.isRequired,children:M().node.isRequired,onClick:M().func.isRequired};const K=s().div.withConfig({displayName:"StyledTask"})(["display:flex;background-color:var(--center-channel-bg);cursor:pointer;width:100%;padding:8px 20px;font-size:14px;align-items:flex-start;color:var(--center-channel-color);position:relative;span{div{display:flex;align-items:flex-start;picture{display:flex;align-items:center;margin-right:10px;}}}&.completed{color:var(--online-indicator);span{span{text-decoration:underline;text-decoration-skip-ink:none;text-underline-offset:-0.325em;}}}:hover{background:rgba(var(--center-channel-color-rgb),0.08);}:active{background-color:rgba(var(--button-bg-rgb),0.08);}:focus{box-shadow:inset 0 0 0 2px rgba(255,255,255,0.32),inset 0 0 0 2px blue;}transition:background 250ms ease-in-out,color 250ms ease-in-out,box-shadow 250ms ease-in-out;"]),W=e=>{const{label:t,completedStatus:a,onClick:n}=e;return o().createElement(K,{className:a?"completed":"",onClick:()=>{n&&n()}},a&&o().createElement(C,{completed:a}),o().createElement("span",null,t))};W.propTypes={label:M().element.isRequired,icon:M().node,onClick:M().func,completedStatus:M().bool.isRequired};const H=s().div.withConfig({displayName:"TaskItems"})(["border-radius:var(--radius-m);border:solid 1px rgba(var(--center-channel-color-rgb),0.16);background-color:var(--center-channel-bg);width:352px;padding:24px 0;transform:scale(0);opacity:0;box-shadow:var(--elevation-6);transition:opacity 250ms ease-in-out 0ms,transform 250ms ease-in-out 0ms;transform-origin:left bottom;max-height:","px;overflow-y:auto;display:none;&.open{transform:scale(1);opacity:1;display:block;}h1{font-size:20px;padding:0 24px;margin:0;}p{font-size:12px;color:rgba(var(--center-channel-color-rgb),0.75);padding:4px 24px;}.link{font-size:12px;color:var(--link-color);padding:12px 24px 0;font-weight:bold;cursor:pointer;display:block;:hover{text-decoration:underline}}"],document.documentElement.clientHeight),U=s().button.withConfig({displayName:"Button"})((e=>{let{open:t}=e;return(0,l.css)(["width:36px;height:36px;padding:7px;border-radius:var(--radius-full);left:15px;bottom:15px;position:fixed;z-index:101;display:flex;align-items:center;background:var(--center-channel-bg);border:solid 1px rgba(var(--center-channel-color-rgb),0.16);box-shadow:var(--elevation-3);color:rgba(var(--center-channel-color-rgb),0.75);&:hover{border-color:rgba(var(--center-channel-color-rgb),0.24);box-shadow:var(--elevation-4);color:rgba(var(--center-channel-color-rgb),0.75)}span{width:20px;height:16px;background:var(--button-bg);position:absolute;display:",";border-radius:12px;color:var(--button-color);font-weight:bold;font-size:11px;line-height:16px;bottom:22px;left:22px;}"],t?"none":"block")})),Y=()=>{const{formatMessage:e}=(0,r.useIntl)(),t=(0,i.useSelector)((e=>0!==Object.keys((0,g.Zo)(e)).length)),a=(0,i.useSelector)(p.dw),l=(0,i.useSelector)(u.Ay),s="true"===(null==l?void 0:l.Cloud),_=!0===(null==a?void 0:a.is_cloud_preview);(0,n.useEffect)((()=>{O((0,d.fr)()),t||O((0,m.Zo)())}),[]);const S=(0,i.useSelector)((e=>(0,g.Jz)(e,y.XV,y.f5.ONBOARDING_TASK_LIST_OPEN))),[w,N]=(0,n.useState)(null),O=(0,i.useDispatch)(),A=(0,i.useSelector)(f.WR),T=(0,v.AC)(),I=(0,y.es)(),[M,F]=(0,n.useState)(I.filter((e=>e.status)).length),[R,z]=(0,n.useState)(!1),L=I.length-M,P=(0,k.qZ)(),D=(0,k.QS)(),X=(0,i.useSelector)((e=>"true"===(0,u.zj)(e).EnableOnboardingFlow)),[B,G]=(0,i.useSelector)(h.xp,((e,t)=>e[0]===t[0]&&e[1]===t[1])),q=(0,i.useSelector)(g.O4);(0,n.useEffect)((()=>{G&&(async()=>{await O((0,m.SF)(A,[{category:y.XV,user_id:A,name:y.f5.ONBOARDING_TASK_LIST_SHOW,value:"true"},{user_id:A,category:y.XV,name:y.f5.ONBOARDING_TASK_LIST_OPEN,value:"true"},{user_id:A,category:E.pm.RECOMMENDED_NEXT_STEPS,name:E.N$.HIDE,value:"true"}]))})()}),[]),(0,n.useEffect)((()=>{G&&B&&X&&(0,b.sx)(y.XV,y.f5.ONBOARDING_TASK_LIST_SHOW)}),[G,B,X]),(0,n.useEffect)((()=>{const e=I.filter((e=>e.status)).length;localStorage.getItem(y.XV)||M+1===e&&!S?(setTimeout((()=>{z(!0),F(e)}),100),setTimeout((()=>{z(!1),F(e)}),500),localStorage.removeItem(y.XV)):F(e)}),[I,M]);const K=(0,n.useCallback)((()=>{const e=[{user_id:A,category:y.XV,name:y.f5.ONBOARDING_TASK_LIST_SHOW,value:"false"},{user_id:A,category:y.XV,name:y.f5.ONBOARDING_TASK_LIST_OPEN,value:"false"}];O((0,m.SF)(A,e)),(0,b.sx)(y.XV,y.f5.DECLINED_ONBOARDING_TASK_LIST)}),[A]),Y=(0,n.useCallback)((()=>{const e=[{user_id:A,category:y.XV,name:y.f5.ONBOARDING_TASK_LIST_OPEN,value:String(!S)}];O((0,m.SF)(A,e)),(0,b.sx)(y.XV,S?y.f5.ONBOARDING_TASK_LIST_CLOSE:y.f5.ONBOARDING_TASK_LIST_OPEN)}),[S,A]);return!t||!B||!X||s&&_?null:o().createElement(x.default,{theme:q},o().createElement(C,{completed:R}),o().createElement(U,{onClick:Y,ref:e=>N(e),open:S,"data-cy":"onboarding-task-list-action-button","aria-label":e({id:"onboardingTask.checklist.start_onboarding_process",defaultMessage:"Start the onboarding process."})},S?o().createElement(c.CloseIcon,{size:20}):o().createElement(c.PlaylistCheckIcon,{size:20}),0!==L&&o().createElement("span",null,L)),o().createElement(j,{isVisible:S,trigger:w,onClick:Y},o().createElement(H,{className:S?"open":""},M===I.length?o().createElement(V,{dismissAction:K,isFirstAdmin:D,isCurrentUserSystemAdmin:P}):o().createElement(o().Fragment,null,o().createElement("h1",null,o().createElement(r.FormattedMessage,{id:"next_steps_view.welcomeToMattermost",defaultMessage:"Welcome to Mattermost"})),o().createElement("p",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.main_subtitle",defaultMessage:"Let's get up and running."})),I.map((e=>o().createElement(W,{key:y.XV+e.name,label:e.label(),onClick:()=>{var t;t=e.name,Y(),T(t)},completedStatus:e.status}))),o().createElement("span",{className:"link",onClick:K},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.dismiss_link",defaultMessage:"No thanks, I'll figure it out myself"}))))))}}}]);
//# sourceMappingURL=1517.50f11fa988745083cb8c.js.map