{"version":3,"file":"plugin-es.js","sources":["../src/scripts/boards.ts","../src/styles/boards.css?raw","../src/styles/premium.css?raw","../src/main.tsx"],"sourcesContent":["// Adds a button to return to the channels page from the mobile boards page\nfunction handleButton() {\n\tconst sidebar = document.querySelector(\".Sidebar.octo-sidebar\");\n\tif (!sidebar || sidebar.closest(\"#focalboard-app\") === null) {\n\t\treturn;\n\t}\n\tif (window.innerWidth < 770) {\n\t\t// Look for the expected HTML structure\n\t\tconst workspaceTitle = document.querySelector(\".WorkspaceTitle\");\n\t\tif (workspaceTitle && !sidebar.classList.contains(\"hidden\")) {\n\t\t\tconst sidebarSwitcher = workspaceTitle.querySelector(\".sidebarSwitcher\");\n\t\t\tif (sidebarSwitcher) {\n\t\t\t\t// Check if the button is already appended\n\t\t\t\tif (!workspaceTitle.querySelector(\".back-button-freemium\")) {\n\t\t\t\t\tconst backButton = document.createElement(\"button\");\n\t\t\t\t\tbackButton.textContent = \"🏠\";\n\t\t\t\t\tbackButton.className = \"back-button-freemium\";\n\t\t\t\t\tbackButton.style.backgroundColor = \"transparent\";\n\t\t\t\t\tbackButton.style.border = \"none\";\n\t\t\t\t\tbackButton.style.marginLeft = \"10px\";\n\n\t\t\t\t\tbackButton.addEventListener(\"click\", () => {\n\t\t\t\t\t\twindow.location.href = window.location.origin;\n\t\t\t\t\t});\n\n\t\t\t\t\t// Append the button as a sibling of the sidebarSwitcher\n\t\t\t\t\tconst last = sidebarSwitcher.parentNode.lastChild;\n\t\t\t\t\tif (last) {\n\t\t\t\t\t\tsidebarSwitcher.parentNode.insertBefore(backButton, last);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (window.innerWidth >= 770 || sidebar.classList.contains(\"hidden\")) {\n\t\tconst backButton = document.querySelector(\".back-button-freemium\");\n\t\tif (backButton) {\n\t\t\tbackButton.remove();\n\t\t}\n\t}\n}\n\nexport default function main() {\n\t// Use mutation observer to detect sidebar opening\n\tconst target = document.body;\n\tconst callback = (mutations: MutationRecord[]) => {\n\t\tfor (const mutation of mutations) {\n\t\t\tif (mutation.type === \"childList\" || mutation.type === \"attributes\") {\n\t\t\t\thandleButton();\n\t\t\t}\n\t\t}\n\t};\n\tconst observer = new MutationObserver(callback);\n\tconst config = {\n\t\tchildList: true,\n\t\tattributes: true,\n\t\tsubtree: true,\n\t};\n\tobserver.observe(target, config);\n}\n","export default \"/* Hide the feedback button in the boards page */\\n.BoardComponent .top-head .TopBar {\\n\\tdisplay: none !important;\\n}\\n\\n/* Fixes for the desktop boards page */\\n.CalendarContainer {\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\tmargin-right: 0 !important;\\n\\tmargin-bottom: 0 !important;\\n\\tpadding-bottom: 10px !important;\\n\\tpadding-right: 80px !important;\\n}\\n\\n.ShareBoardButton .Button.size--medium {\\n\\tpadding: 0 10px !important;\\n\\theight: 30px !important;\\n}\\n\\n.ViewTitle .add-buttons {\\n\\tmargin-top: 5px !important;\\n}\\n\\n.focalboard-body .DateRange .Modal {\\n\\tleft: -240px !important;\\n}\\n\\n@media only screen and (max-width: 768px) {\\n\\t/* Fixes for the mobile boards page */\\n\\t.BoardComponent .top-head .mid-head {\\n\\t\\tmargin-top: 80px !important;\\n\\t\\tflex-wrap: wrap !important;\\n\\t\\tgap: 15px !important;\\n\\t}\\n\\n\\t.focalboard-body .ViewTitle > .add-buttons .Button {\\n\\t\\tdisplay: flex !important;\\n\\t}\\n\\n\\t.mid-head {\\n\\t\\tmargin-left: 6px;\\n\\t}\\n\\n\\t.fc-toolbar-title {\\n\\t\\ttext-align: center !important;\\n\\t}\\n\\n\\t.fc-header-toolbar .fc-toolbar-chunk:nth-of-type(3) {\\n\\t\\tjustify-content: center !important;\\n\\t\\talign-items: center !important;\\n\\t\\tdisplay: flex !important;\\n\\t\\tflex-direction: row !important;\\n\\t\\tflex-wrap: wrap !important;\\n\\t}\\n\\n\\t.fc-dayGridWeek-button {\\n\\t\\tmargin-left: 12px;\\n\\t}\\n\\n\\t.CalendarContainer {\\n\\t\\tpadding-right: 20px !important;\\n\\t}\\n\\n\\t.d-flex.justify-content-between.tabs-inputs {\\n\\t\\tflex-wrap: wrap;\\n\\t\\tgap: 15px;\\n\\t}\\n\\n\\t.focalboard-body .ShareBoardDialog .tabs-content .tabs-inputs .input-container {\\n\\t\\twidth: 100% !important;\\n\\t}\\n\\n\\t.WorkspaceTitle {\\n\\t\\tmargin-bottom: 15px;\\n\\t}\\n\\n\\t.octo-sidebar-header.show-button:hover {\\n\\t\\tbackground-color: var(--center-channel-bg) !important;\\n\\t}\\n}\\n\\n@media only screen and (max-width: 975px) {\\n\\t/* Fixes for the boards mobile card detail popup */\\n\\t.dialog:has(.CardDetail) {\\n\\t\\tborder-radius: 0 !important;\\n\\t}\\n}\\n\\n@media only screen and (max-width: 430px) {\\n\\t/* Fixes for other boards mobile popups */\\n\\t.Menu.noselect {\\n\\t\\twidth: 100vw !important;\\n\\t\\tmax-width: 100vw !important;\\n\\t\\tmin-height: 100vh !important;\\n\\t\\tbackground-color: var(--center-channel-bg) !important;\\n\\t\\tpadding: 40px !important;\\n\\t\\tdisplay: flex !important;\\n\\t}\\n\\n\\t.focalboard-body .DateRange .Modal {\\n\\t\\tposition: fixed !important;\\n\\t\\toverflow: scroll !important;\\n\\t\\tmargin: 40px !important;\\n\\t\\tleft: 0 !important;\\n\\t}\\n\\n\\t.CardDetail {\\n\\t\\toverflow-x: scroll !important;\\n\\t}\\n\\n\\t.focalboard-body .SubMenuOption .SubMenu.Menu.noselect.bottom {\\n\\t\\tbackground-color: var(--center-channel-bg) !important;\\n\\t}\\n\\n\\t.menu-option.menu-cancel {\\n\\t\\tjustify-content: center !important;\\n\\t\\tborder-radius: 5px !important;\\n\\t}\\n\\n\\t.Menu.noselect .menu-contents {\\n\\t\\tjustify-content: center !important;\\n\\t}\\n\\n\\t.MenuOption {\\n\\t\\tborder-radius: 5px !important;\\n\\t}\\n\\n\\t.ModalWrapper .Modal.bottom {\\n\\t\\ttop: 0 !important;\\n\\t\\tmax-width: 100vw !important;\\n\\t}\\n\\n\\t.Modal.bottom .toolbar {\\n\\t\\tvisibility: hidden !important;\\n\\t}\\n\\n\\t.FilterComponent {\\n\\t\\tpadding-right: 30px;\\n\\t\\tmax-width: 100%;\\n\\t}\\n\\n\\t.SwitchOption .Switch {\\n\\t\\tmargin-left: 10px;\\n\\t}\\n\\n\\t.dialog .toolbar {\\n\\t\\tpadding-left: 0px !important;\\n\\t}\\n\\n\\t.cardFollowBtn {\\n\\t\\tpadding: 0 10px !important;\\n\\t}\\n\\n\\t.BoardSwitcherDialog .toolbar {\\n\\t\\twidth: 100% !important;\\n\\t\\tpadding-left: 20px !important;\\n\\t}\\n\\n\\t.BoardSwitcherDialog .dialog {\\n\\t\\twidth: 80% !important;\\n\\t}\\n\\n\\t.BoardSwitcherDialog .noResults {\\n\\t\\tvisibility: hidden !important;\\n\\t}\\n\\n\\t.BoardSwitcherDialog .dialog-subtitle {\\n\\t\\tdisplay: none !important;\\n\\t}\\n}\\n\"","export default \"/* Hide the Mattermost name, icon and free label tag from the home page */\\n[class^=\\\"ProductBrandingTeamEditionContainer\\\"] {\\n\\tdisplay: none !important;\\n}\\n\\n/* Hide the Mattermost name, icon and free label tag from the login page */\\n.header-logo-link:has(> .freeBadge) {\\n\\tdisplay: none !important;\\n}\\n\\n/* Hide the team edition warning in the bottom of the open top left corner menu */\\n#startTrial {\\n\\tdisplay: none !important;\\n}\\n\\n/* Hide the leftover menu divider that was above the warning */\\nli.menu-divider:has(+ #startTrial) {\\n\\tdisplay: none !important;\\n}\\n\\n/* Hide the free trial banner / upgrade card in the admin console license page */\\n.admin-console__banner_section:has(.AlertBanner.info.AlertBanner--sys) {\\n\\tdisplay: none !important;\\n}\\n\\n/* Hide the TeamEditionRightPanel card in the right panel of the admin console license page */\\n.right-panel:has(> .panel-card + .compare-plans-text) {\\n\\tdisplay: none !important;\\n}\\n\\n/* Hide any upgrade dialogs that pop up*/\\ndiv[role=\\\"dialog\\\"]:has(> #StartTrialFormModal) {\\n\\tdisplay: none !important;\\n}\\n\\n/* Hide the footer notice text */\\n.footer-copyright {\\n\\tdisplay: none !important;\\n}\\n\\n/* Hide the view plans button in the top right corner of the dashboard */\\n#RightControlsContainer #UpgradeButton {\\n\\tdisplay: none !important;\\n}\\n\\n/* Hide the paid \\\"User Groups\\\" menu item in product switcher */\\n#product-switcher-menu-dropdown #userGroups {\\n\\tdisplay: none !important;\\n}\\n\\n/* Hide the premium setting to highlight keywords */\\n#accountSettingsModal .section-min.isDisabled {\\n\\tdisplay: none !important;\\n}\\n\"","import type { GlobalState } from \"@mattermost/types/store\";\nimport type { Action, Store } from \"redux\";\nimport manifest from \"~/../../plugin.json\";\nimport boardsTS from \"~/scripts/boards\";\nimport boardsCSS from \"~/styles/boards.css?raw\";\nimport premiumCSS from \"~/styles/premium.css?raw\";\nimport type { PluginRegistry } from \"~/types/mattermost\";\n\n// https://developers.mattermost.com/integrate/plugins/components/webapp\ndeclare global {\n\tinterface Window {\n\t\tregisterPlugin(pluginId: string, plugin: Plugin): void;\n\t}\n}\n\n// https://developers.mattermost.com/integrate/reference/webapp/webapp-reference\nclass Plugin {\n\tpublic initialize(registry: PluginRegistry, _store: Store<GlobalState, Action<string>>) {\n\t\t// CSS INJECTION\n\t\tconst style = document.createElement(\"style\");\n\t\tstyle.textContent = [\n\t\t\t// Import as raw and join the contents to be added to the DOM, additional styles can be appended here\n\t\t\tpremiumCSS,\n\t\t\tboardsCSS,\n\t\t].join(\"\\n\");\n\t\tdocument.head.appendChild(style);\n\n\t\t// TS INJECTION\n\t\tregistry.registerGlobalComponent(() => {\n\t\t\t// Call any script that needs to be ran in the app, additional functions can be added here\n\t\t\tboardsTS();\n\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tpublic uninitialize() {\n\t\t// No cleanup needed with current implementation\n\t}\n}\n\nwindow.registerPlugin(manifest.id, new Plugin());\n"],"names":["boardsTS"],"mappings":";;;;AACA,SAAS,eAAe;AACjB,QAAA,UAAU,SAAS,cAAc,uBAAuB;AAC9D,MAAI,CAAC,WAAW,QAAQ,QAAQ,iBAAiB,MAAM,MAAM;AAC5D;AAAA,EAAA;AAEG,MAAA,OAAO,aAAa,KAAK;AAEtB,UAAA,iBAAiB,SAAS,cAAc,iBAAiB;AAC/D,QAAI,kBAAkB,CAAC,QAAQ,UAAU,SAAS,QAAQ,GAAG;AACtD,YAAA,kBAAkB,eAAe,cAAc,kBAAkB;AACvE,UAAI,iBAAiB;AAEpB,YAAI,CAAC,eAAe,cAAc,uBAAuB,GAAG;AACrD,gBAAA,aAAa,SAAS,cAAc,QAAQ;AAClD,qBAAW,cAAc;AACzB,qBAAW,YAAY;AACvB,qBAAW,MAAM,kBAAkB;AACnC,qBAAW,MAAM,SAAS;AAC1B,qBAAW,MAAM,aAAa;AAEnB,qBAAA,iBAAiB,SAAS,MAAM;AACnC,mBAAA,SAAS,OAAO,OAAO,SAAS;AAAA,UAAA,CACvC;AAGK,gBAAA,OAAO,gBAAgB,WAAW;AACxC,cAAI,MAAM;AACO,4BAAA,WAAW,aAAa,YAAY,IAAI;AAAA,UAAA;AAAA,QACzD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAED,MAAI,OAAO,cAAc,OAAO,QAAQ,UAAU,SAAS,QAAQ,GAAG;AAC/D,UAAA,aAAa,SAAS,cAAc,uBAAuB;AACjE,QAAI,YAAY;AACf,iBAAW,OAAO;AAAA,IAAA;AAAA,EACnB;AAEF;AAEA,SAAwB,OAAO;AAE9B,QAAM,SAAS,SAAS;AAClB,QAAA,WAAW,CAAC,cAAgC;AACjD,eAAW,YAAY,WAAW;AACjC,UAAI,SAAS,SAAS,eAAe,SAAS,SAAS,cAAc;AACvD,qBAAA;AAAA,MAAA;AAAA,IACd;AAAA,EAEF;AACM,QAAA,WAAW,IAAI,iBAAiB,QAAQ;AAC9C,QAAM,SAAS;AAAA,IACd,WAAW;AAAA,IACX,YAAY;AAAA,IACZ,SAAS;AAAA,EACV;AACS,WAAA,QAAQ,QAAQ,MAAM;AAChC;AC3DA,MAAe,YAAA;ACAf,MAAe,aAAA;ACgBf,MAAM,OAAO;AAAA,EACL,WAAW,UAA0B,QAA4C;AAEjF,UAAA,QAAQ,SAAS,cAAc,OAAO;AAC5C,UAAM,cAAc;AAAA;AAAA,MAEnB;AAAA,MACA;AAAA,IAAA,EACC,KAAK,IAAI;AACF,aAAA,KAAK,YAAY,KAAK;AAG/B,aAAS,wBAAwB,MAAM;AAE7BA,WAAA;AAEF,aAAA;AAAA,IAAA,CACP;AAAA,EAAA;AAAA,EAGK,eAAe;AAAA,EAAA;AAGvB;AAEA,OAAO,eAAe,SAAS,IAAI,IAAI,QAAQ;"}